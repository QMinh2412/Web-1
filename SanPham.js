let listProducts = [
  {
    id: 1,
    name: "Samsung Galaxy S21",
    brandId: "samsung",
    image: "asset/img/samsung1.webp",
    thumnailList: [
      { thumnail: "asset/img/samsung1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/samsung3.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/samsung4.webp", alt: "Ảnh 3" },
    ],
    desc: "Tùy chọn màu sắc mới của dòng điện thoại này ",
    screen: "6.7 inchs",
    cameratruoc: "12MP, ƒ/1.9, Tự động lấy nét theo pha Focus Pixels",
    camerasau: "48MP, f/1.78, 24mm, 2µm",
    chipset: "Apple A18 Pro",
    ram: "8GB",
    bonhotrong: "32GB",
    pin: "3265 mAh",
    os: "iOS 18",
    price: 309800000,
    storage: "256GB",
    promotion: "Giảm 5% cho khách hàng mới",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 2,
    name: "iPhone 13",
    brandId: "iphone",
    image: "asset/img/iphone1.webp",
    thumnailList: [
      { thumnail: "asset/img/iphone1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/iphone3.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/iphone4.webp", alt: "Ảnh 3" },
    ],
    desc: "Tùy chọn màu sắc mới của dòng điện thoại này ",
    screen: "6.8 inchs",
    cameratruoc: "12MP, ƒ/1.9, Tự động lấy nét theo pha Focus Pixels",
    camerasau: "48MP, f/1.78, 24mm, 2µm",
    chipset: "Apple A18 Pro",
    ram: "8GB",
    bonhotrong: "256GB",
    pin: "3265 mAh",
    os: "iOS 18",
    price: 23990000,
    storage: "256GB",
    promotion: "Giảm 5% cho khách hàng mới",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 3,
    name: "iphone 15",
    brandId: "iphone",
    image: "asset/img/iphone2.webp",
    thumnailList: [
      { thumnail: "asset/img/iphone1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/iphone3.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/iphone4.webp", alt: "Ảnh 3" },
    ],
    desc: "Tùy chọn màu sắc mới của dòng điện thoại này",
    screen: "6.7 inchs",
    cameratruoc: "12MP, ƒ/1.9, Tự động lấy nét theo pha Focus Pixels",
    camerasau: "48MP, f/1.78, 24mm, 2µm",
    chipset: "Apple A18 Pro",
    ram: "8GB",
    bonhotrong: "256GB",
    pin: "4200 mAh",
    os: "iOS 18",
    price: 14990000,
    storage: "256GB",
    promotion: "Mua 1 tặng 1",
    rating: 4,
    isFavorite: false,
  },
  {
    id: 4,
    name: "Samsung Galaxy S21",
    brandId: "samsung",
    image: "asset/img/samsung2.webp",
    thumnailList: [
      { thumnail: "asset/img/samsung1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/samsung3.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/samsung4.webp", alt: "Ảnh 3" },
    ],
    desc: "Tùy chọn màu sắc mới của dòng điện thoại này ",
    screen: "5.5 inchs",
    cameratruoc: "12MP, ƒ/1.9, Tự động lấy nét theo pha Focus Pixels",
    camerasau: "48MP, f/1.78, 24mm, 2µm",
    chipset: "Apple A18 Pro",
    ram: "8GB",
    bonhotrong: "256GB",
    pin: "3000 mAh",
    os: "iOS 18",
    price: 309800000,
    storage: "256GB",
    promotion: "Giảm 5% cho khách hàng mới",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 5,
    name: "Xiaomi",
    brandId: "xiaomi",
    image: "asset/img/redmi1.webp",
    thumnailList: [
      { thumnail: "asset/img/samsung1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/samsung3.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/samsung4.webp", alt: "Ảnh 3" },
    ],
    desc: "Tùy chọn màu sắc mới của dòng điện thoại này ",
    screen: "6.8 inchs",
    cameratruoc: "12MP, ƒ/1.9, Tự động lấy nét theo pha Focus Pixels",
    camerasau: "48MP, f/1.78, 24mm, 2µm",
    chipset: "Apple A18 Pro",
    ram: "8GB",
    bonhotrong: "256GB",
    pin: "3500 mAh",
    os: "iOS 18",
    price: 30800000,
    storage: "256GB",
    promotion: "Giảm 5% cho khách hàng mới",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 6,
    name: "Xiaomi 1",
    brandId: "xiaomi",
    image: "asset/img/redmi2.webp",
    thumnailList: [
      { thumnail: "asset/img/samsung1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/samsung3.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/samsung4.webp", alt: "Ảnh 3" },
    ],
    desc: "Tùy chọn màu sắc mới của dòng điện thoại này ",
    screen: "6.3 inchs",
    cameratruoc: "12MP, ƒ/1.9, Tự động lấy nét theo pha Focus Pixels",
    camerasau: "48MP, f/1.78, 24mm, 2µm",
    chipset: "Apple A18 Pro",
    ram: "8GB",
    bonhotrong: "256GB",
    pin: "4300 mAh",
    os: "iOS 18",
    price: 20800000,
    storage: "256GB",
    promotion: "Giảm 5% cho khách hàng mới",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 7,
    name: "iPhone 13",
    brandId: "iphone",
    image: "asset/img/iphone3.webp",
    thumnailList: [
      { thumnail: "asset/img/iphone1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/iphone3.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/iphone4.webp", alt: "Ảnh 3" },
    ],
    desc: "Tùy chọn màu sắc mới của dòng điện thoại này ",
    screen: "5.8 inchs",
    cameratruoc: "12MP, ƒ/1.9, Tự động lấy nét theo pha Focus Pixels",
    camerasau: "48MP, f/1.78, 24mm, 2µm",
    chipset: "Apple A18 Pro",
    ram: "8GB",
    bonhotrong: "256GB",
    pin: "3265 mAh",
    os: "iOS 18",
    price: 23990000,
    storage: "256GB",
    promotion: "Giảm 5% cho khách hàng mới",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 8,
    name: "iPhone 13",
    brandId: "iphone",
    image: "asset/img/iphone4.webp",
    thumnailList: [
      { thumnail: "asset/img/iphone1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/iphone3.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/iphone4.webp", alt: "Ảnh 3" },
    ],
    desc: "Tùy chọn màu sắc mới của dòng điện thoại này ",
    screen: "6.8 inchs",
    cameratruoc: "12MP, ƒ/1.9, Tự động lấy nét theo pha Focus Pixels",
    camerasau: "48MP, f/1.78, 24mm, 2µm",
    chipset: "Apple A18 Pro",
    ram: "8GB",
    bonhotrong: "256GB",
    pin: "3500 mAh",
    os: "iOS 18",
    price: 23990000,
    storage: "256GB",
    promotion: "Giảm 5% cho khách hàng mới",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 9,
    name: "Sony Xperia 1",
    brandId: "sony",
    thumnailList: [
      { thumnail: "asset/img/samsung1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/samsung3.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/samsung4.webp", alt: "Ảnh 3" },
    ],
    desc: "Tùy chọn màu sắc mới của dòng điện thoại này ",
    screen: "6.4 inchs",
    cameratruoc: "12MP, ƒ/1.9, Tự động lấy nét theo pha Focus Pixels",
    camerasau: "48MP, f/1.78, 24mm, 2µm",
    chipset: "Apple A18 Pro",
    ram: "8GB",
    bonhotrong: "256GB",
    pin: "4000 mAh",
    os: "iOS 18",
    price: 309800000,
    storage: "256GB",
    promotion: "Giảm 5% cho khách hàng mới",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 10,
    name: "Realme GT",
    brandId: "realme",
    thumnailList: [
      { thumnail: "asset/img/samsung1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/samsung3.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/samsung4.webp", alt: "Ảnh 3" },
    ],
    desc: "Tùy chọn màu sắc mới của dòng điện thoại này ",
    screen: "6.7 inchs",
    cameratruoc: "12MP, ƒ/1.9, Tự động lấy nét theo pha Focus Pixels",
    camerasau: "48MP, f/1.78, 24mm, 2µm",
    chipset: "Apple A18 Pro",
    ram: "8GB",
    bonhotrong: "256GB",
    pin: "3265 mAh",
    os: "iOS 18",
    price: 309800000,
    storage: "256GB",
    promotion: "Giảm 5% cho khách hàng mới",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 11,
    name: "Nokia 8.3",
    brandId: "nokia",
    thumnailList: [
      { thumnail: "asset/img/samsung1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/samsung3.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/samsung4.webp", alt: "Ảnh 3" },
    ],
    desc: "Tùy chọn màu sắc mới của dòng điện thoại này ",
    screen: "5.8 inchs",
    cameratruoc: "12MP, ƒ/1.9, Tự động lấy nét theo pha Focus Pixels",
    camerasau: "48MP, f/1.78, 24mm, 2µm",
    chipset: "Apple A18 Pro",
    ram: "8GB",
    bonhotrong: "256GB",
    pin: "5000 mAh",
    os: "iOS 18",
    price: 309800000,
    storage: "256GB",
    promotion: "Giảm 5% cho khách hàng mới",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 12,
    name: "Motorola Edge 20",
    brandId: "motorola",
    thumnailList: [
      { thumnail: "asset/img/samsung1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/samsung3.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/samsung4.webp", alt: "Ảnh 3" },
    ],
    desc: "Tùy chọn màu sắc mới của dòng điện thoại này ",
    screen: "6.7 inchs",
    cameratruoc: "12MP, ƒ/1.9, Tự động lấy nét theo pha Focus Pixels",
    camerasau: "48MP, f/1.78, 24mm, 2µm",
    chipset: "Apple A18 Pro",
    ram: "4GB",
    bonhotrong: "256GB",
    pin: "3.265 mAh",
    os: "iOS 18",
    price: 309800000,
    storage: "256GB",
    promotion: "Giảm 5% cho khách hàng mới",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 13,
    name: "Asus Zenfone 8",
    brandId: "asus",
    thumnailList: [
      { thumnail: "asset/img/samsung1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/samsung3.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/samsung4.webp", alt: "Ảnh 3" },
    ],
    desc: "Tùy chọn màu sắc mới của dòng điện thoại này ",
    screen: "6.7 inchs",
    cameratruoc: "12MP, ƒ/1.9, Tự động lấy nét theo pha Focus Pixels",
    camerasau: "48MP, f/1.78, 24mm, 2µm",
    chipset: "Apple A18 Pro",
    ram: "6GB",
    bonhotrong: "256GB",
    pin: "3.265 mAh",
    os: "iOS 18",
    price: 309800000,
    storage: "256GB",
    promotion: "Giảm 5% cho khách hàng mới",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 14,
    name: "LG Velvet",
    brandId: "lg",
    thumnailList: [
      { thumnail: "asset/img/samsung1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/samsung3.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/samsung4.webp", alt: "Ảnh 3" },
    ],
    desc: "Tùy chọn màu sắc mới của dòng điện thoại này ",
    screen: "6.7 inchs",
    cameratruoc: "12MP, ƒ/1.9, Tự động lấy nét theo pha Focus Pixels",
    camerasau: "48MP, f/1.78, 24mm, 2µm",
    chipset: "Apple A18 Pro",
    ram: "4GB",
    bonhotrong: "256GB",
    pin: "3.265 mAh",
    os: "iOS 18",
    price: 309800000,
    storage: "256GB",
    promotion: "Giảm 5% cho khách hàng mới",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 15,
    name: "Honor 50",
    brandId: "honor",
    thumnailList: [
      { thumnail: "asset/img/samsung1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/samsung3.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/samsung4.webp", alt: "Ảnh 3" },
    ],
    desc: "Tùy chọn màu sắc mới của dòng điện thoại này ",
    screen: "6.7 inchs",
    cameratruoc: "12MP, ƒ/1.9, Tự động lấy nét theo pha Focus Pixels",
    camerasau: "48MP, f/1.78, 24mm, 2µm",
    chipset: "Apple A18 Pro",
    ram: "4GB",
    bonhotrong: "256GB",
    pin: "3.265 mAh",
    os: "iOS 18",
    price: 309800000,
    storage: "256GB",
    promotion: "Giảm 5% cho khách hàng mới",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 16,
    name: "Tecno Camon 17",
    brandId: "tecno",
    thumnailList: [
      { thumnail: "asset/img/samsung1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/samsung3.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/samsung4.webp", alt: "Ảnh 3" },
    ],
    desc: "Tùy chọn màu sắc mới của dòng điện thoại này ",
    screen: "6.7 inchs",
    cameratruoc: "12MP, ƒ/1.9, Tự động lấy nét theo pha Focus Pixels",
    camerasau: "48MP, f/1.78, 24mm, 2µm",
    chipset: "Apple A18 Pro",
    ram: "6GB",
    bonhotrong: "256GB",
    pin: "3.265 mAh",
    os: "iOS 18",
    price: 309800000,
    storage: "256GB",
    promotion: "Giảm 5% cho khách hàng mới",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 17,
    name: "Infinix Note 10",
    brandId: "infinix",
    thumnailList: [
      { thumnail: "asset/img/samsung1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/samsung3.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/samsung4.webp", alt: "Ảnh 3" },
    ],
    desc: "Tùy chọn màu sắc mới của dòng điện thoại này ",
    screen: "6.7 inchs",
    cameratruoc: "12MP, ƒ/1.9, Tự động lấy nét theo pha Focus Pixels",
    camerasau: "48MP, f/1.78, 24mm, 2µm",
    chipset: "Apple A18 Pro",
    ram: "8GB",
    bonhotrong: "256GB",
    pin: "3.265 mAh",
    os: "iOS 18",
    price: 309800000,
    storage: "256GB",
    promotion: "Giảm 5% cho khách hàng mới",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 18,
    name: "ZTE Axon 20",
    brandId: "zte",
    thumnailList: [
      { thumnail: "asset/img/samsung1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/samsung3.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/samsung4.webp", alt: "Ảnh 3" },
    ],
    desc: "Tùy chọn màu sắc mới của dòng điện thoại này ",
    screen: "6.7 inchs",
    cameratruoc: "12MP, ƒ/1.9, Tự động lấy nét theo pha Focus Pixels",
    camerasau: "48MP, f/1.78, 24mm, 2µm",
    chipset: "Apple A18 Pro",
    ram: "8GB",
    bonhotrong: "256GB",
    pin: "3.265 mAh",
    os: "iOS 18",
    price: 309800000,
    storage: "256GB",
    promotion: "Giảm 5% cho khách hàng mới",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 19,
    name: "Alcatel 3X",
    brandId: "alcatel",
    thumnailList: [
      { thumnail: "asset/img/samsung1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/samsung3.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/samsung4.webp", alt: "Ảnh 3" },
    ],
    desc: "Tùy chọn màu sắc mới của dòng điện thoại này ",
    screen: "6.7 inchs",
    cameratruoc: "12MP, ƒ/1.9, Tự động lấy nét theo pha Focus Pixels",
    camerasau: "48MP, f/1.78, 24mm, 2µm",
    chipset: "Apple A18 Pro",
    ram: "8GB",
    bonhotrong: "256GB",
    pin: "3.265 mAh",
    os: "iOS 18",
    price: 309800000,
    storage: "256GB",
    promotion: "Giảm 5% cho khách hàng mới",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 20,
    name: "Samsung Galaxy S21",
    brandId: "samsung",
    image: "asset/img/samsung3.webp",
    thumnailList: [
      { thumnail: "asset/img/samsung1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/samsung3.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/samsung4.webp", alt: "Ảnh 3" },
    ],
    desc: "Tùy chọn màu sắc mới của dòng điện thoại này ",
    screen: "6.7 inchs",
    cameratruoc: "12MP, ƒ/1.9, Tự động lấy nét theo pha Focus Pixels",
    camerasau: "48MP, f/1.78, 24mm, 2µm",
    chipset: "Apple A18 Pro",
    ram: "8GB",
    bonhotrong: "256GB",
    pin: "3.265 mAh",
    os: "iOS 18",
    price: 309800000,
    storage: "256GB",
    promotion: "Giảm 5% cho khách hàng mới",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 21,
    name: "Samsung Galaxy S21",
    brandId: "samsung",
    image: "asset/img/samsung4.webp",
    thumnailList: [
      { thumnail: "asset/img/samsung1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/samsung3.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/samsung4.webp", alt: "Ảnh 3" },
    ],
    desc: "Tùy chọn màu sắc mới của dòng điện thoại này ",
    screen: "6.7 inchs",
    cameratruoc: "12MP, ƒ/1.9, Tự động lấy nét theo pha Focus Pixels",
    camerasau: "48MP, f/1.78, 24mm, 2µm",
    chipset: "Apple A18 Pro",
    ram: "8GB",
    bonhotrong: "256GB",
    pin: "3.265 mAh",
    os: "iOS 18",
    price: 309800000,
    storage: "256GB",
    promotion: "Giảm 5% cho khách hàng mới",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 22,
    name: "Samsung Galaxy S21",
    brandId: "samsung",
    image: "asset/img/samsung5.webp",
    thumnailList: [
      { thumnail: "asset/img/samsung1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/samsung3.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/samsung4.webp", alt: "Ảnh 3" },
    ],
    desc: "Tùy chọn màu sắc mới của dòng điện thoại này ",
    screen: "6.7 inchs",
    cameratruoc: "12MP, ƒ/1.9, Tự động lấy nét theo pha Focus Pixels",
    camerasau: "48MP, f/1.78, 24mm, 2µm",
    chipset: "Apple A18 Pro",
    ram: "8GB",
    bonhotrong: "256GB",
    pin: "3.265 mAh",
    os: "iOS 18",
    price: 309800000,
    storage: "256GB",
    promotion: "Giảm 5% cho khách hàng mới",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 23,
    name: "Samsung Galaxy S21",
    brandId: "samsung",
    image: "asset/img/samsung6.webp",
    thumnailList: [
      { thumnail: "asset/img/samsung1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/samsung3.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/samsung4.webp", alt: "Ảnh 3" },
    ],
    desc: "Tùy chọn màu sắc mới của dòng điện thoại này ",
    screen: "6.7 inchs",
    cameratruoc: "12MP, ƒ/1.9, Tự động lấy nét theo pha Focus Pixels",
    camerasau: "48MP, f/1.78, 24mm, 2µm",
    chipset: "Apple A18 Pro",
    ram: "8GB",
    bonhotrong: "256GB",
    pin: "3.265 mAh",
    os: "iOS 18",
    price: 309800000,
    storage: "256GB",
    promotion: "Giảm 5% cho khách hàng mới",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 24,
    name: "Samsung Galaxy S21",
    brandId: "samsung",
    image: "asset/img/samsung7.webp",
    thumnailList: [
      { thumnail: "asset/img/samsung1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/samsung3.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/samsung4.webp", alt: "Ảnh 3" },
    ],
    desc: "Tùy chọn màu sắc mới của dòng điện thoại này ",
    screen: "6.7 inchs",
    cameratruoc: "12MP, ƒ/1.9, Tự động lấy nét theo pha Focus Pixels",
    camerasau: "48MP, f/1.78, 24mm, 2µm",
    chipset: "Apple A18 Pro",
    ram: "8GB",
    bonhotrong: "256GB",
    pin: "3.265 mAh",
    os: "iOS 18",
    price: 309800000,
    storage: "256GB",
    promotion: "Giảm 5% cho khách hàng mới",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 25,
    name: "BlackBerry Key2",
    brandId: "blackberry",
    thumnailList: [
      { thumnail: "asset/img/samsung1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/samsung3.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/samsung4.webp", alt: "Ảnh 3" },
    ],
    desc: "Tùy chọn màu sắc mới của dòng điện thoại này ",
    screen: "6.7 inchs",
    cameratruoc: "12MP, ƒ/1.9, Tự động lấy nét theo pha Focus Pixels",
    camerasau: "48MP, f/1.78, 24mm, 2µm",
    chipset: "Apple A18 Pro",
    ram: "8GB",
    bonhotrong: "256GB",
    pin: "3.265 mAh",
    os: "iOS 18",
    price: 309800000,
    storage: "256GB",
    promotion: "Giảm 5% cho khách hàng mới",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 26,
    name: "iPhone 13",
    brandId: "iphone",
    image: "asset/img/iphone1.webp",
    thumnailList: [
      { thumnail: "asset/img/iphone1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/iphone3.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/iphone4.webp", alt: "Ảnh 3" },
    ],
    desc: "Tùy chọn màu sắc mới của dòng điện thoại này ",
    screen: "6.7 inchs",
    cameratruoc: "12MP, ƒ/1.9, Tự động lấy nét theo pha Focus Pixels",
    camerasau: "48MP, f/1.78, 24mm, 2µm",
    chipset: "Apple A18 Pro",
    ram: "8GB",
    bonhotrong: "256GB",
    pin: "3.265 mAh",
    os: "iOS 18",
    price: 33990000,
    storage: "256GB",
    promotion: "Giảm 5% cho khách hàng mới",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 27,
    name: "iPhone 13",
    brandId: "iphone",
    image: "asset/img/iphone2.webp",
    thumnailList: [
      { thumnail: "asset/img/iphone1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/iphone3.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/iphone4.webp", alt: "Ảnh 3" },
    ],
    desc: "Tùy chọn màu sắc mới của dòng điện thoại này ",
    screen: "6.7 inchs",
    cameratruoc: "12MP, ƒ/1.9, Tự động lấy nét theo pha Focus Pixels",
    camerasau: "48MP, f/1.78, 24mm, 2µm",
    chipset: "Apple A18 Pro",
    ram: "8GB",
    bonhotrong: "256GB",
    pin: "3.265 mAh",
    os: "iOS 18",
    price: 20990000,
    storage: "256GB",
    promotion: "Giảm 5% cho khách hàng mới",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 28,
    name: "iPhone 13",
    brandId: "iphone",
    image: "asset/img/iphone1.webp",
    thumnailList: [
      { thumnail: "asset/img/iphone1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/iphone3.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/iphone4.webp", alt: "Ảnh 3" },
    ],
    desc: "Tùy chọn màu sắc mới của dòng điện thoại này ",
    screen: "6.7 inchs",
    cameratruoc: "12MP, ƒ/1.9, Tự động lấy nét theo pha Focus Pixels",
    camerasau: "48MP, f/1.78, 24mm, 2µm",
    chipset: "Apple A18 Pro",
    ram: "8GB",
    bonhotrong: "256GB",
    pin: "3.265 mAh",
    os: "iOS 18",
    price: 15990000,
    storage: "256GB",
    promotion: "Giảm 5% cho khách hàng mới",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 29,
    name: "iPhone 13",
    brandId: "iphone",
    image: "asset/img/iphone1.webp",
    thumnailList: [
      { thumnail: "asset/img/iphone1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/iphone3.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/iphone4.webp", alt: "Ảnh 3" },
    ],
    desc: "Tùy chọn màu sắc mới của dòng điện thoại này ",
    screen: "6.7 inchs",
    cameratruoc: "12MP, ƒ/1.9, Tự động lấy nét theo pha Focus Pixels",
    camerasau: "48MP, f/1.78, 24mm, 2µm",
    chipset: "Apple A18 Pro",
    ram: "8GB",
    bonhotrong: "256GB",
    pin: "3.265 mAh",
    os: "iOS 18",
    price: 32990000,
    storage: "256GB",
    promotion: "Giảm 5% cho khách hàng mới",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 30,
    name: "iPhone 13",
    brandId: "iphone",
    image: "asset/img/iphone1.webp",
    thumnailList: [
      { thumnail: "asset/img/iphone1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/iphone3.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/iphone4.webp", alt: "Ảnh 3" },
    ],
    desc: "Tùy chọn màu sắc mới của dòng điện thoại này ",
    screen: "6.7 inchs",
    cameratruoc: "12MP, ƒ/1.9, Tự động lấy nét theo pha Focus Pixels",
    camerasau: "48MP, f/1.78, 24mm, 2µm",
    chipset: "Apple A18 Pro",
    ram: "8GB",
    bonhotrong: "256GB",
    pin: "3.265 mAh",
    os: "iOS 18",
    price: 23590000,
    storage: "256GB",
    promotion: "Giảm 5% cho khách hàng mới",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 31,
    name: "iPhone 13",
    brandId: "iphone",
    image: "asset/img/iphone1.webp",
    thumnailList: [
      { thumnail: "asset/img/iphone1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/iphone3.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/iphone4.webp", alt: "Ảnh 3" },
    ],
    desc: "Tùy chọn màu sắc mới của dòng điện thoại này ",
    screen: "6.7 inchs",
    cameratruoc: "12MP, ƒ/1.9, Tự động lấy nét theo pha Focus Pixels",
    camerasau: "48MP, f/1.78, 24mm, 2µm",
    chipset: "Apple A18 Pro",
    ram: "8GB",
    bonhotrong: "256GB",
    pin: "3.265 mAh",
    os: "iOS 18",
    price: 40990000,
    storage: "256GB",
    promotion: "Giảm 5% cho khách hàng mới",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 32,
    name: "iPhone 13",
    brandId: "iphone",
    image: "asset/img/iphone1.webp",
    thumnailList: [
      { thumnail: "asset/img/iphone1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/iphone3.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/iphone4.webp", alt: "Ảnh 3" },
    ],
    desc: "Tùy chọn màu sắc mới của dòng điện thoại này ",
    screen: "6.7 inchs",
    cameratruoc: "12MP, ƒ/1.9, Tự động lấy nét theo pha Focus Pixels",
    camerasau: "48MP, f/1.78, 24mm, 2µm",
    chipset: "Apple A18 Pro",
    ram: "8GB",
    bonhotrong: "256GB",
    pin: "3.265 mAh",
    os: "iOS 18",
    price: 14990000,
    storage: "256GB",
    promotion: "Giảm 5% cho khách hàng mới",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 33,
    name: "iPhone 13",
    brandId: "iphone",
    image: "asset/img/iphone1.webp",
    thumnailList: [
      { thumnail: "asset/img/iphone1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/iphone3.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/iphone4.webp", alt: "Ảnh 3" },
    ],
    desc: "Tùy chọn màu sắc mới của dòng điện thoại này ",
    screen: "6.7 inchs",
    cameratruoc: "12MP, ƒ/1.9, Tự động lấy nét theo pha Focus Pixels",
    camerasau: "48MP, f/1.78, 24mm, 2µm",
    chipset: "Apple A18 Pro",
    ram: "8GB",
    bonhotrong: "256GB",
    pin: "3.265 mAh",
    os: "iOS 18",
    price: 13990000,
    storage: "256GB",
    promotion: "Giảm 5% cho khách hàng mới",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 34,
    name: "iPhone 13",
    brandId: "iphone",
    image: "asset/img/iphone1.webp",
    thumnailList: [
      { thumnail: "asset/img/iphone1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/iphone3.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/iphone4.webp", alt: "Ảnh 3" },
    ],
    desc: "Tùy chọn màu sắc mới của dòng điện thoại này ",
    screen: "6.7 inchs",
    cameratruoc: "12MP, ƒ/1.9, Tự động lấy nét theo pha Focus Pixels",
    camerasau: "48MP, f/1.78, 24mm, 2µm",
    chipset: "Apple A18 Pro",
    ram: "8GB",
    bonhotrong: "256GB",
    pin: "3.265 mAh",
    os: "iOS 18",
    price: 29990000,
    storage: "256GB",
    promotion: "Giảm 5% cho khách hàng mới",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 35,
    name: "iPhone 13",
    brandId: "iphone",
    image: "asset/img/iphone1.webp",
    thumnailList: [
      { thumnail: "asset/img/iphone1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/iphone3.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/iphone4.webp", alt: "Ảnh 3" },
    ],
    desc: "Tùy chọn màu sắc mới của dòng điện thoại này ",
    screen: "6.7 inchs",
    cameratruoc: "12MP, ƒ/1.9, Tự động lấy nét theo pha Focus Pixels",
    camerasau: "48MP, f/1.78, 24mm, 2µm",
    chipset: "Apple A18 Pro",
    ram: "8GB",
    bonhotrong: "256GB",
    pin: "3.265 mAh",
    os: "iOS 18",
    price: 11990000,
    storage: "256GB",
    promotion: "Giảm 5% cho khách hàng mới",
    rating: 5,
    isFavorite: true,
  },
];

if (listProducts.length <= 0) {
  alert("danh sach trong");
} else {
  // đẩy mảng lên local storage
  localStorage.setItem("data", JSON.stringify(listProducts));
}

// lấy dữ liệu tù local storage
listProducts = JSON.parse(localStorage.getItem("data"));

// ======================== KHAI BÁO BIẾN ==============================
let productsByBrand = [];
let originalProductsByBrand = []; // Mảng tạm lưu danh sách sản phẩm theo hãng ban đầu
let productPerPage = 10;
let currentPage = 1; // Trang hiện tại

// ====================== HÀM IN SẢN PHẨM THEO HÃNG ===========================
const urlParams = new URLSearchParams(window.location.search);
const brandProduct = urlParams.get("brand");
const beginPage = urlParams.get("page");

console.log("brand: ", brandProduct);
console.log("kiểu của brand: ", typeof brandProduct);

function displayListByBrand(brand) {
  productsByBrand = [];

  // Kiểm tra nếu brand là null
  if (brand === "null") {
    console.log("đang chạy trong brand === null");
    productsByBrand = listProducts; // Nếu brand là null, lấy tất cả sản phẩm
    originalProductsByBrand = productsByBrand; // Lưu vào mảng tạm
  } else {
    for (let element of listProducts) {
      if (element.brandId === brand) {
        productsByBrand.push(element);
      }
    }
    originalProductsByBrand = productsByBrand; // Lưu vào mảng tạm
  }

  console.log("danh sách theo hãng lúc này: ", productsByBrand);

  if (productsByBrand.length === 0) {
    alert("danh sach trong");
    return;
  }

  currentPage = 1;
  displayProductPerPage(currentPage);
}

displayListByBrand(brandProduct);
// console.log(productsByBrand);

// ======================== HÀM HIỆN THỊ BỘ LỌC ===========================================
function showFilter() {
  document.getElementsByClassName("filter")[0].innerHTML = `
    <div class="filter-box filter-synthetic">
      <i class="fa-solid fa-filter"></i>
      <span class="text-filter">Lọc</span>

      <form onsubmit="syntheticFilter(event)">
        <div class="options-filter">
          <div class="pin option">
            <h4>Dung lượng pin</h4>
            <div class="value-select">
              <span id="bt34" onclick="selectValue(this, 'battery')">3000-4000 mAh</span>
              <span id="bt45" onclick="selectValue(this, 'battery')">4000-5000 mAh</span>
              <span id="bt56" onclick="selectValue(this, 'battery')">5000-6000 mAh</span>
              <span id="bt67" onclick="selectValue(this, 'battery')">6000-7000 mAh</span>
            </div>
          </div>
          <div class="ram option">
            <h4>Ram</h4>
            <div class="value-select">
              <span id="ram4" onclick="selectValue(this, 'ram')">4GB</span>
              <span id="ram6" onclick="selectValue(this, 'ram')">6GB</span>
              <span id="ram8" onclick="selectValue(this, 'ram')">8GB</span>
              <span id="ram12" onclick="selectValue(this, 'ram')">12GB</span>
            </div>
          </div>
          <div class="rom option">
            <h4>Rom</h4>
            <div class="value-select">
              <span id="rom32" onclick="selectValue(this, 'rom')">32GB</span>
              <span id="rom64" onclick="selectValue(this, 'rom')">64GB</span>
              <span id="rom128" onclick="selectValue(this, 'rom')">128GB</span>
              <span id="rom256" onclick="selectValue(this, 'rom')">256GB</span>
              <span id="rom512" onclick="selectValue(this, 'rom')">512GB</span>
              <span id="rom1024" onclick="selectValue(this, 'rom')">1TB</span>
            </div>          
          </div>
          <div class="screen option">
             <h4>Kích thước màn hình</h4>
            <div class="value-select">
              <span id="scr55" onclick="selectValue(this, 'screen')">Bé hơn 5.5 inch</span>
              <span id="scr5563" onclick="selectValue(this, 'screen')">5.5-6.3 inch</span>
              <span id="scr6467" onclick="selectValue(this, 'screen')">6.4-6.7 inch</span>
              <span id="scr68" onclick="selectValue(this, 'screen')">Lớn hơn 6.8 inch</span>
            </div>
          </div>
        </div>
        <input type="submit" value="Áp dụng" />
      </form>
    </div>

    <div class="filter-box filter-about">
      <i class="fa-solid fa-coins"></i>
      <span class="text-filter">Khoảng giá</span>
      <form onsubmit="filterAboutPrice(event)">
        <div class="slider-container">
          <input
            type="range"
            id="rangeSlider"
            min="2000000"
            max="100000000"
            value="5000000"
            step="200000"
            oninput="updateSliderValue(event)"
          />
          <span id="sliderValue"></span>
          <input type="submit" value="Áp dụng" />
        </div>
      </form>
    </div>

    <div
      class="filter-box filter-hTol"
      id="dec"
      onclick="sortProductsByPrice(this)"
    >
      <i class="fa-solid fa-arrow-down-wide-short"></i>
      <span class="text-filter">Giá giảm dần</span>
    </div>

    <div
      class="filter-box filter-lToh"
      id="inc"
      onclick="sortProductsByPrice(this)"
    >
      <i class="fa-solid fa-arrow-up-wide-short"></i>
      <span class="text-filter">Giá tăng dần</span>
    </div>
  `;
}

showFilter();

// ====================================== HÀM THÊM ACTIVE CHO CÁC MỤC ĐƯỢC CHỌN ===============================

function selectValue(selectedSpan, filterType) {
  const allSpans = selectedSpan.parentElement.getElementsByTagName("span");
  const isActive = selectedSpan.classList.contains("active");

  // Xóa class active khỏi tất cả các thẻ span
  for (let span of allSpans) {
    span.classList.remove("active");
  }

  // Nếu thẻ chưa có class active, thêm class active vào thẻ được chọn
  if (!isActive) {
    selectedSpan.classList.add("active");
  } else {
    // Nếu thẻ đã có class active, xóa class active
    selectedSpan.classList.remove("active");
  }
}

// ========================= HÀM CẮT DỮ LIỆU CẦN LỌC =====================================

function getSelectedBattery() {
  const activeSpan = document.querySelector(
    ".filter .pin .value-select .active"
  );

  // Kiểm tra nếu không tìm thấy activeSpan
  if (!activeSpan) {
    return null; // Hoặc trả về một giá trị mặc định
  }

  // Lấy nội dung văn bản
  let content = activeSpan.textContent;

  // Tìm vị trí khoảng trắng đầu tiên
  const indexCut = content.indexOf(" ");
  content = content.slice(0, indexCut); // Cắt từ đầu đến khoảng trắng

  // Chia và chuyển đổi thành số
  let value = content.split("-").map(Number);
  return value;
}

function getRamValue() {
  const activeSpan = document.querySelector(
    ".filter .ram .value-select .active"
  );

  // Kiểm tra nếu không tìm thấy activeSpan
  if (!activeSpan) {
    return null; // Hoặc trả về một giá trị mặc định
  }

  let content = activeSpan.textContent;

  const indexCut = content.indexOf("GB");
  content = content.slice(0, indexCut);

  let value = Number(content);

  return value;
}

function getRomValue() {
  const activeSpan = document.querySelector(
    ".filter .rom .value-select .active"
  );

  // Kiểm tra nếu không tìm thấy activeSpan
  if (!activeSpan) {
    return null; // Hoặc trả về một giá trị mặc định
  }

  let content = activeSpan.textContent;

  const indexCut = content.indexOf("GB");
  content = content.slice(0, indexCut);

  let value = Number(content);

  return value;
}

function getScreenValue() {
  // Tìm phần tử có class '.active' trong các thẻ <span> chứa kích thước màn hình
  const activeSpan = document.querySelector(".screen .value-select .active");

  // Kiểm tra nếu không có phần tử nào được chọn
  if (!activeSpan) {
    return null; // Hoặc bạn có thể trả về một giá trị mặc định
  }

  // Lấy nội dung văn bản của thẻ activeSpan
  const content = activeSpan.textContent;

  // Cắt nội dung để lấy giá trị kích thước màn hình
  // Nếu có định dạng cụ thể, bạn có thể cắt theo cách khác
  // Ví dụ: "5.5-6.3 inch" => ["5.5", "6.3"]
  const sizeValues = content.match(/(\d+(\.\d+)?)/g).map(Number); // Lấy tất cả số trong chuỗi

  if (content.includes("Bé hơn")) sizeValues.unshift(0);
  if (content.includes("Lớn hơn")) sizeValues.push(0);

  return sizeValues; // Chuyển đổi các giá trị thành số
}

// =========================== HÀM LỌC SẢN PHẨM THEO NHIỀU TIÊU CHÍ ====================================
function syntheticFilter(event) {
  event.preventDefault(); // Ngăn chặn hành động gửi biểu mẫu

  const batteryValue = getSelectedBattery();
  const ramValue = getRamValue();
  const romValue = getRomValue();
  const screenValue = getScreenValue();

  // Kiểm tra mảng sản phẩm
  if (!Array.isArray(productsByBrand)) {
    console.error("productsByBrand không phải là một mảng.");
    return;
  }

  // lưu mảng vào một biến gốc
  const originalProductsByBrand = productsByBrand.slice(); // Sao chép mảng
  let filteredArr = [];

  for (let element of productsByBrand) {
    if (
      !element.pin ||
      !element.ram ||
      !element.bonhotrong ||
      !element.screen
    ) {
      console.error(
        "Một trong các thuộc tính sản phẩm là null hoặc undefined."
      );
      continue; // Bỏ qua sản phẩm này
    }

    // lấy dữ liệu từng sản phẩm và cắt lấy đúng giá trị số
    const pinCut = element.pin.indexOf(" ");
    let pinOfProduct = Number(element.pin.slice(0, pinCut));
    const ramGB = element.ram.indexOf("GB");
    let ramOfProduct = Number(element.ram.slice(0, ramGB));
    const romGB = element.bonhotrong.indexOf("GB");
    let romOfProduct = Number(element.bonhotrong.slice(0, romGB));
    const scrMAH = element.screen.indexOf(" ");
    let scrOfProduct = Number(element.screen.slice(0, scrMAH));

    if (
      batteryValue &&
      pinOfProduct >= batteryValue[0] &&
      pinOfProduct <= batteryValue[1]
    ) {
      filteredArr.push(element);
    } else if (ramValue && ramOfProduct === ramValue) {
      filteredArr.push(element);
    } else if (romValue && romOfProduct === romValue) {
      filteredArr.push(element);
    } else if (
      screenValue &&
      scrOfProduct >= screenValue[0] &&
      scrOfProduct <= screenValue[1]
    ) {
      filteredArr.push(element);
    }
  }

  productsByBrand = filteredArr; // Cập nhật danh sách sản phẩm
  currentPage = 1;
  displayProductPerPage(currentPage);

  productsByBrand = originalProductsByBrand; // cập nhật lại danh sách ban đầu
}

// ======================== HÀM HIỆN THỊ CÁC SẢN PHẨM TRÊN TRANG ==========================
function displayProductPerPage(page) {
  window.scrollTo(0, 0); // Cuộn lên đầu trang

  currentPage = page;
  const startIndex = (page - 1) * productPerPage;
  const endIndex = startIndex + productPerPage;
  const cutArr = productsByBrand.slice(startIndex, endIndex); // Lấy phần tử cho trang hiện tại

  display(cutArr); // Hiển thị danh sách sản phẩm cắt từ productsByBrand
  productPagination(); // Cập nhật phân trang dựa trên productsByBrand

  // Cập nhật URL với số trang
  const brand = new URLSearchParams(window.location.search).get("brand");
  const newUrl = `SanPham.html?brand=${brand}&page=${page}`;
  history.pushState(null, "", newUrl); // Thay đổi URL mà không làm mới trang
}

// ========================= QUAY LẠI TRANG TRƯỚC ============================
// Lắng nghe sự kiện popstate
window.addEventListener("popstate", function (event) {
  // window.scroll(0, 0);

  const urlParams = new URLSearchParams(window.location.search);
  const brand = urlParams.get("brand");
  const page = parseInt(urlParams.get("page")) || 1; // Mặc định là trang 1

  // Gọi hàm để hiển thị sản phẩm theo brand và trang
  displayListByBrand(brand);
});

// ===================== HÀM TẠO PHÂN TRANG ================================
function productPagination(brand, page) {
  const totalProduct = productsByBrand.length;
  const totalPage = Math.ceil(totalProduct / productPerPage); // Tổng số trang

  let paginationHTML = "";
  for (let i = 1; i <= totalPage; i++) {
    const isActive = i === currentPage;
    paginationHTML += `
      <button class="btn-page ${
        isActive ? "active" : ""
      }" onclick="displayProductPerPage(${i})">
        ${i}
      </button>
    `;
  }
  document.getElementById("pagination").innerHTML = paginationHTML;
}

// =================== HÀM HIỆN THỊ SẢN PHẨM ===============================
function display(list) {
  let productHTML = "";
  for (let product of list) {
    productHTML += `
        <a href="detail.html?id=${product.id}">
          <div class="product-card">
            <div class="product-img">
              <img src="${product.image}" alt="${
      product.name
    }" style="width:100%">
            </div>
            <div class="product-info">
              <h4>${product.name}</h4>
              <p class="price">${formatPrice(product.price)}</p>
            <div class="storage-capacity">
                ${product.size ? `<span>${product.size}</span>` : ""}
                ${product.storage ? `<span>${product.storage}</span>` : ""}
                ${product.capacity ? `<span>${product.capacity}</span>` : ""}
              </div>
              <div class="promotion">${product.promotion}</div>
              <div class="rating-favorite">
                <div class="rating">
                  ${createRatingStars(product.rating)}
                </div>
                <div class="favorite">
                  <span>Yêu thích</span>
                  <i class="fa-${
                    product.isFavorite ? "solid" : "regular"
                  } fa-heart" id="heart-icon"></i>
                </div>
              </div>
            </div>
          </div>
        </a>
      `;
  }
  document.getElementsByClassName("list-product")[0].innerHTML = productHTML;
}

// =========================== HÀM SẮP XẾP SẢN PHẨM THEO GIÁ ==========================
function sortProductsByPrice(obj) {
  if (obj.id === "inc") {
    productsByBrand.sort((a, b) => a.price - b.price); // Sắp xếp tăng dần
    sort = "inc";
  } else if (obj.id === "dec") {
    productsByBrand.sort((a, b) => b.price - a.price); // Sắp xếp giảm dần
    sort = "dec";
  }
  currentPage = 1; // Đặt lại trang hiện tại về 1 khi sắp xếp
  displayProductPerPage(currentPage); // Hiển thị sản phẩm đã sắp xếp theo trang đầu
}

// =========================== HÀM LỌC SẢN PHẨM THEO KHOẢNG GIÁ ======================
function filterAboutPrice(event) {
  event.preventDefault(); // Ngăn chặn hành vi gửi form

  const maxPrice = Number(document.getElementById("rangeSlider").value);
  const minPrice = 2000000; // Thay đổi tùy theo yêu cầu khoảng giá thấp nhất
  console.log("min: ", minPrice);
  console.log("max: ", maxPrice);

  // Lọc sản phẩm theo khoảng giá từ mảng tạm
  const filteredProducts = originalProductsByBrand.filter(
    (element) => element.price >= minPrice && element.price <= maxPrice
  );

  console.log("filtered: ", filteredProducts);

  if (filteredProducts.length === 0) {
    alert("Không có sản phẩm nào trong khoảng giá này.");
    productsByBrand = []; // Nếu không có sản phẩm nào, gán danh sách sản phẩm là rỗng
  } else {
    productsByBrand = filteredProducts; // Cập nhật danh sách sản phẩm đã lọc
  }

  currentPage = 1; // Đặt lại trang hiện tại về 1
  displayProductPerPage(currentPage); // Hiển thị sản phẩm đã lọc theo trang đầu
  productPagination(); // Cập nhật phân trang dựa trên productsByBrand
}

// hàm cập nhật giá trị slider cho khoảng giá
function updateSliderValue() {
  const slider = document.getElementById("rangeSlider");
  document.getElementById("sliderValue").textContent = slider.value;
}

// =========================== HÀM TÌM KIẾM THEO TÊN SẢN PHẨM =============================
function searchProduct(event) {
  event.preventDefault();
  let nameFind = document.getElementById("search-box").value;

  productsByBrand = [];
  for (let element of listProducts) {
    if (element.name.toLowerCase().includes(nameFind.toLowerCase())) {
      productsByBrand.push(element);
    }
  }

  if (productsByBrand.length === 0) {
    document.getElementsByClassName("product-display")[0].innerHTML = `
      <div style="color: red; font-size: 20px; font-weight: 600; font-style: italic; text-align: center">
        Danh sách trống
      </div> `;
  } else {
    currentPage = 1;
    displayProductPerPage(currentPage);
  }

  // Cập nhật URL với nội dung tìm kiếm
  const newUrl = `SanPham.html?find=${encodeURIComponent(nameFind)}`;
  history.pushState(null, "", newUrl); // Thay đổi URL mà không làm mới trang
}

// =========================== HÀM HỘ TRỠ =============================
// Hàm định dạng giá tiền
function formatPrice(price) {
  return price.toLocaleString("vi-VN", { style: "currency", currency: "VND" });
}

// Hàm tạo các ngôi sao đánh giá
function createRatingStars(rating) {
  let stars = "";
  for (let i = 0; i < 5; i++) {
    stars += `<i class="fa-solid fa-star${
      i < rating ? "" : "-half-stroke"
    }"></i>`;
  }
  return stars;
}

// xử lý input range
const rangeSlider = document.getElementById("rangeSlider");
const sliderValue = document.getElementById("sliderValue");

rangeSlider.addEventListener("input", function () {
  const value = rangeSlider.value;
  sliderValue.textContent = value;

  // Tính toán vị trí của giá trị theo dấu chấm kéo
  const sliderWidth = rangeSlider.offsetWidth;
  const thumbWidth = 16; // Kích thước dấu chấm kéo
  const max = rangeSlider.max;
  const min = rangeSlider.min;

  const percent = (value - min) / (max - min);
  const offset = percent * (sliderWidth - thumbWidth);

  sliderValue.style.left = `${offset}px`;
});

// Hiển thị giá trị khi người dùng nhấn vào thanh trượt
rangeSlider.addEventListener("mousedown", function () {
  sliderValue.style.opacity = "0.8";
});

// Ẩn giá trị khi người dùng thả chuột
rangeSlider.addEventListener("mouseup", function () {
  sliderValue.style.opacity = "0";
});

// Xử lý ẩn giá trị khi người dùng rời chuột ngoài thanh trượt
rangeSlider.addEventListener("mouseleave", function () {
  sliderValue.style.opacity = "0";
});
