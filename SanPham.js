let listProducts = [
  {
    id: 1,
    name: "iPhone 16 Pro Max 256GB | Chính hãng VN/A",
    brandId: "iphone",
    image: "asset/img/ip1-1.webp",
    thumnailList: [
      { thumnail: "asset/img/ip1-1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/ip1-2.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/ip1-3.webp", alt: "Ảnh 3" },
    ],
    desc: "Thoải mái lựa chọn màu sắc yêu thích, phù hợp với phong cách của bạn. Đa dạng màu sắc thời thượng, từ cổ điển đến hiện đại. Tùy chỉnh sản phẩm theo sở thích cá nhân, tạo nên dấu ấn riêng. Lựa chọn phụ kiện đi kèm theo phong cách của bạn.",
    screen: "6.9 inchs",
    cameratruoc: "12MP, ƒ/1.9, Tự động lấy nét theo pha Focus Pixels",
    camerasau:
      "Camera chính: 48MP, f/1.78, 24mm, 2µm. Camera góc siêu rộng: 48MP, 13 mm,ƒ/2.2 và trường ảnh 120 độ",
    chipset: "Apple A18 Pro",
    ram: "8GB",
    pin: "4422 mAh",
    os: "iOS 18",
    price: 34190000,
    storage: "256GB",
    promotion: "Giá ưu đãi đặc biệt: Giảm ngay 20% cho đơn hàng đầu tiên!",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 2,
    name: "iPhone 15 Pro Max 256GB | Chính hãng VN/A",
    brandId: "iphone",
    image: "asset/img/ip2-1.webp",
    thumnailList: [
      { thumnail: "asset/img/ip2-1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/ip2-2.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/ip2-3.webp", alt: "Ảnh 3" },
    ],
    desc: "Thoải mái lựa chọn màu sắc yêu thích, phù hợp với phong cách của bạn. Đa dạng màu sắc thời thượng, từ cổ điển đến hiện đại. Tùy chỉnh sản phẩm theo sở thích cá nhân, tạo nên dấu ấn riêng. Lựa chọn phụ kiện đi kèm theo phong cách của bạn.",
    screen: "6.7 inchs",
    cameratruoc: "12MP, ƒ/1.9",
    camerasau:
      "Camera chính: 48MP, 24 mm, ƒ/1.78. Camera góc siêu rộng: 12 MP, 13 mm, ƒ/2.2. Camera Tele: 12 MP",
    chipset: "Apple A17 Pro 6 nhân",
    ram: "8GB",
    pin: "4422 mAh",
    os: "iOS 18",
    price: 29490000,
    storage: "256GB",
    promotion:
      "Mua 1 tặng 1: Mua một chiếc điện thoại, tặng một phụ kiện đi kèm!",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 3,
    name: "iPhone 16 128GB | Chính hãng VN/A",
    brandId: "iphone",
    image: "asset/img/ip3-1.webp",
    thumnailList: [
      { thumnail: "asset/img/ip3-1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/ip3-2.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/ip3-3.webp", alt: "Ảnh 3" },
    ],
    desc: "Thoải mái lựa chọn màu sắc yêu thích, phù hợp với phong cách của bạn. Đa dạng màu sắc thời thượng, từ cổ điển đến hiện đại. Tùy chỉnh sản phẩm theo sở thích cá nhân, tạo nên dấu ấn riêng. Lựa chọn phụ kiện đi kèm theo phong cách của bạn.",
    screen: "6.1 inchs",
    cameratruoc: "12MP, ƒ/1.9, Tự động lấy nét theo pha Focus Pixels",
    camerasau:
      "Camera chính: 48MP, f/1.6, 26mm. Camera góc siêu rộng: 12MP, ƒ/2.2, 13 mm",
    chipset: "Apple A18",
    ram: "8GB",
    pin: "4422 mAh",
    os: "iOS 18",
    price: 21990000,
    storage: "128GB",
    promotion:
      "Trả góp 0% lãi suất: Trả góp linh hoạt, 0% lãi suất trong 6 tháng!",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 4,
    name: "iPhone 15 128GB | Chính hãng VN/A",
    brandId: "iphone",
    image: "asset/img/ip4-1.webp",
    thumnailList: [
      { thumnail: "asset/img/ip4-1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/ip4-2.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/ip4-3.webp", alt: "Ảnh 3" },
    ],
    desc: "Thoải mái lựa chọn màu sắc yêu thích, phù hợp với phong cách của bạn. Đa dạng màu sắc thời thượng, từ cổ điển đến hiện đại. Tùy chỉnh sản phẩm theo sở thích cá nhân, tạo nên dấu ấn riêng. Lựa chọn phụ kiện đi kèm theo phong cách của bạn.",
    screen: "6.1 inchs",
    cameratruoc: "12MP, ƒ/1.9",
    camerasau: "Chính 48 MP & Phụ 12 MP",
    chipset: "Apple A16 Bionic 6 nhân",
    ram: "6GB",
    pin: "3349 mAh",
    os: "iOS 17",
    price: 19690000,
    storage: "128GB",
    promotion:
      "Quà tặng hấp dẫn: Mua điện thoại, nhận ngay tai nghe không dây miễn phí!",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 5,
    name: "iPhone 14 Pro Max 128GB | Chính hãng VN/A",
    brandId: "iphone",
    image: "asset/img/ip5-1.webp",
    thumnailList: [
      { thumnail: "asset/img/ip5-1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/ip5-2.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/ip5-3.webp", alt: "Ảnh 3" },
    ],
    desc: "Thoải mái lựa chọn màu sắc yêu thích, phù hợp với phong cách của bạn. Đa dạng màu sắc thời thượng, từ cổ điển đến hiện đại. Tùy chỉnh sản phẩm theo sở thích cá nhân, tạo nên dấu ấn riêng. Lựa chọn phụ kiện đi kèm theo phong cách của bạn.",
    screen: "6.7 inchs",
    cameratruoc: "Camera selfie: 12 MP, f/1.9, 23mm, 1/3.6",
    camerasau:
      "Camera chính: 48 MP, f/1.8, 24mm, 1.22µm. Camera góc siêu rộng: 12 MP, f/2.2, 13mm, 120˚, 1.4µm. Camera tele: 12 MP, f/2.8, 77mm",
    chipset: "Apple A16 Bionic 6-core",
    ram: "6GB",
    pin: "4323 mAh",
    os: "iOS 16",
    price: 25590000,
    storage: "128GB",
    promotion:
      "Bảo hành mở rộng: Bảo hành 2 năm cho mọi sản phẩm, yên tâm sử dụng!",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 6,
    name: "iPhone 11 64GB | Chính hãng VN/A",
    brandId: "iphone",
    image: "asset/img/ip6-1.webp",
    thumnailList: [
      { thumnail: "asset/img/ip6-1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/ip6-2.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/ip6-3.webp", alt: "Ảnh 3" },
    ],
    desc: "Thoải mái lựa chọn màu sắc yêu thích, phù hợp với phong cách của bạn. Đa dạng màu sắc thời thượng, từ cổ điển đến hiện đại. Tùy chỉnh sản phẩm theo sở thích cá nhân, tạo nên dấu ấn riêng. Lựa chọn phụ kiện đi kèm theo phong cách của bạn.",
    screen: "6.1 inchs",
    cameratruoc: "12 MP, ƒ/2.2 aperture",
    camerasau:
      "Camera góc rộng: ƒ/1.8 aperture. Camera siêu rộng: ƒ/2.4 aperture",
    chipset: "A13 Bionic",
    ram: "4GB",
    pin: "3110 mAh",
    os: "iOS 13 hoặc cao hơn",
    price: 8990000,
    storage: "64GB",
    promotion:
      "Chương trình đổi cũ lấy mới: Đổi điện thoại cũ, nhận thêm ưu đãi lên tới 1 triệu đồng!",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 7,
    name: "iPhone 12 64GB | Chính hãng VN/A",
    brandId: "iphone",
    image: "asset/img/ip7-1.webp",
    thumnailList: [
      { thumnail: "asset/img/ip7-1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/ip7-2.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/ip7-3.jpg", alt: "Ảnh 3" },
    ],
    desc: "Thoải mái lựa chọn màu sắc yêu thích, phù hợp với phong cách của bạn. Đa dạng màu sắc thời thượng, từ cổ điển đến hiện đại. Tùy chỉnh sản phẩm theo sở thích cá nhân, tạo nên dấu ấn riêng. Lựa chọn phụ kiện đi kèm theo phong cách của bạn.",
    screen: "6.1 inchs",
    cameratruoc:
      "12 MP, f/2.2, 23mm (wide), 1/3.6 SL 3D, (depth/biometrics sensor)",
    camerasau:
      "12 MP, f/1.6, 26mm (wide), 1.4µm, dual pixel PDAF, OIS 12 MP, f/2.4, 120 độ, 13mm (ultrawide), 1/3.6",
    chipset: "Apple A14 Bionic (5 nm)",
    ram: "4GB",
    pin: "3265 mAh",
    os: "iOS 14.1",
    price: 10990000,
    storage: "64GB",
    promotion: "Giá ưu đãi đặc biệt: Giảm ngay 20% cho đơn hàng đầu tiên!",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 8,
    name: "iPhone 13 Pro Max 256GB | Chính hãng VN/A",
    brandId: "iphone",
    image: "asset/img/ip8-1.jpg",
    thumnailList: [
      { thumnail: "asset/img/ip8-1.jpg", alt: "Ảnh 1" },
      { thumnail: "asset/img/ip8-2.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/ip8-3.webp", alt: "Ảnh 3" },
    ],
    desc: "Thoải mái lựa chọn màu sắc yêu thích, phù hợp với phong cách của bạn. Đa dạng màu sắc thời thượng, từ cổ điển đến hiện đại. Tùy chỉnh sản phẩm theo sở thích cá nhân, tạo nên dấu ấn riêng. Lựa chọn phụ kiện đi kèm theo phong cách của bạn.",
    screen: "6.7 inchs",
    cameratruoc: "12MP, ƒ/2.2",
    camerasau:
      "Camera góc rộng: 12MP, ƒ/1.5. Camera góc siêu rộng: 12MP, ƒ/1.8. Camera tele : 12MP, /2.8",
    chipset: "Apple A18 Pro",
    ram: "6GB",
    pin: "4352 mAh",
    os: "iOS 15",
    price: 23990000,
    storage: "256GB",
    promotion: "Giá ưu đãi đặc biệt: Giảm ngay 20% cho đơn hàng đầu tiên!",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 9,
    name: "iPhone 12 64GB | Chính hãng VN/A",
    brandId: "iphone",
    image: "asset/img/ip9-1.jpg",
    thumnailList: [
      { thumnail: "asset/img/ip9-1.jpg", alt: "Ảnh 1" },
      { thumnail: "asset/img/ip9-2.jpg", alt: "Ảnh 2" },
      { thumnail: "asset/img/ip9-3.jpg", alt: "Ảnh 3" },
    ],
    desc: "Thoải mái lựa chọn màu sắc yêu thích, phù hợp với phong cách của bạn. Đa dạng màu sắc thời thượng, từ cổ điển đến hiện đại. Tùy chỉnh sản phẩm theo sở thích cá nhân, tạo nên dấu ấn riêng. Lựa chọn phụ kiện đi kèm theo phong cách của bạn.",
    screen: "6.1 inchs",
    cameratruoc:
      "12 MP, f/2.2, 23mm (wide), 1/3.6 SL 3D, (depth/biometrics sensor)",
    camerasau:
      "12 MP, f/1.6, 26mm (wide), 1.4µm, dual pixel PDAF, OIS 12 MP, f/2.4, 120˚, 13mm (ultrawide), 1/3.6",
    chipset: "Apple A14 Bionic (5 nm)",
    ram: "4GB",
    pin: "4000 mAh",
    os: "iOS 14.1",
    price: 10990000,
    storage: "64GB",
    promotion:
      "Mua 1 tặng 1: Mua một chiếc điện thoại, tặng một phụ kiện đi kèm!",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 10,
    name: " iPhone 14 Plus 128GB",
    brandId: "iphone",
    image: "asset/img/ip10-1.webp",
    thumnailList: [
      { thumnail: "asset/img/ip10-1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/ip10-2.png", alt: "Ảnh 2" },
      { thumnail: "asset/img/ip10-3.png", alt: "Ảnh 3" },
    ],
    desc: "Thoải mái lựa chọn màu sắc yêu thích, phù hợp với phong cách của bạn. Đa dạng màu sắc thời thượng, từ cổ điển đến hiện đại. Tùy chỉnh sản phẩm theo sở thích cá nhân, tạo nên dấu ấn riêng. Lựa chọn phụ kiện đi kèm theo phong cách của bạn.",
    screen: "6.7 inchs",
    cameratruoc: "12MP, ƒ/1.9, Tự động lấy nét theo pha Focus Pixels",
    camerasau: "48MP, f/1.78, 24mm, 2µm",
    chipset: "Apple A15 Bionic",
    ram: "6GB",
    pin: "4325 mAh",
    os: "iOS 17",
    price: 20090000,
    storage: "128GB",
    promotion:
      "Trả góp 0% lãi suất: Trả góp linh hoạt, 0% lãi suất trong 6 tháng!",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 11,
    name: "iPhone 16 Pro Max 256GB",
    brandId: "iphone",
    image: "asset/img/ip11-1.webp",
    thumnailList: [
      { thumnail: "asset/img/ip11-1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/ip11-2.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/ip11-3.webp", alt: "Ảnh 3" },
    ],
    desc: "Thoải mái lựa chọn màu sắc yêu thích, phù hợp với phong cách của bạn. Đa dạng màu sắc thời thượng, từ cổ điển đến hiện đại. Tùy chỉnh sản phẩm theo sở thích cá nhân, tạo nên dấu ấn riêng. Lựa chọn phụ kiện đi kèm theo phong cách của bạn.",
    screen: "5.8 inchs",
    cameratruoc: "12MP, ƒ/1.9, Tự động lấy nét theo pha Focus Pixels",
    camerasau: "48MP, f/1.78, 24mm, 2µm",
    chipset: "Apple A18 Pro 6 nhân",
    ram: "8GB",
    pin: "5000 mAh",
    os: "iOS 18",
    price: 34490000,
    storage: "256GB",
    promotion:
      "Quà tặng hấp dẫn: Mua điện thoại, nhận ngay tai nghe không dây miễn phí!",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 12,
    name: "Samsung Galaxy S24 Ultra 12GB 256GB",
    brandId: "samsung",
    image: "asset/img/ss1-1.webp",
    thumnailList: [
      { thumnail: "asset/img/ss1-1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/ss1-2.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/ss1-3.webp", alt: "Ảnh 3" },
    ],
    desc: "Thoải mái lựa chọn màu sắc yêu thích, phù hợp với phong cách của bạn. Đa dạng màu sắc thời thượng, từ cổ điển đến hiện đại. Tùy chỉnh sản phẩm theo sở thích cá nhân, tạo nên dấu ấn riêng. Lựa chọn phụ kiện đi kèm theo phong cách của bạn.",
    screen: "6.8 inchs",
    cameratruoc: "12 MP, f/2.2",
    camerasau:
      "Camera chính: 200MP, Laser AF, OIS Camera: 50MP, PDAF, OIS, zoom quang học 5x Camera tele: 10 Camera góc siêu rộng: 12 MP, f/2.2, 13mm, 120 độ",
    chipset: "Snapdragon 8 Gen 3 For Galaxy",
    ram: "12GB",
    pin: "5000 mAh",
    os: "Android 14, One UI 6.1",
    price: 27990000,
    storage: "256GB",
    promotion:
      "Trả góp 0% lãi suất: Trả góp linh hoạt, 0% lãi suất trong 6 tháng!",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 13,
    name: "Samsung Galaxy S24 FE 5G 8GB 128GB",
    brandId: "samsung",
    image: "asset/img/ss2-1.webp",
    thumnailList: [
      { thumnail: "asset/img/ss2-1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/ss2-2.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/ss2-3.webp", alt: "Ảnh 3" },
    ],
    desc: "Thoải mái lựa chọn màu sắc yêu thích, phù hợp với phong cách của bạn. Đa dạng màu sắc thời thượng, từ cổ điển đến hiện đại. Tùy chỉnh sản phẩm theo sở thích cá nhân, tạo nên dấu ấn riêng. Lựa chọn phụ kiện đi kèm theo phong cách của bạn.",
    screen: "6.7 inchs",
    cameratruoc: "10MP",
    camerasau: "50MP + 12vMP + 8MP",
    chipset: "Exynos 2400e (4nm)",
    ram: "6GB",
    pin: "4700 mAh",
    os: "Android 14",
    price: 16990000,
    storage: "128GB",
    promotion:
      "Quà tặng hấp dẫn: Mua điện thoại, nhận ngay tai nghe không dây miễn phí!",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 14,
    name: "Samsung Galaxy M55 (12GB 256GB)",
    brandId: "samsung",
    image: "asset/img/ss3-1.webp",
    thumnailList: [
      { thumnail: "asset/img/ss3-1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/ss3-2.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/ss3-3.webp", alt: "Ảnh 3" },
    ],
    desc: "Thoải mái lựa chọn màu sắc yêu thích, phù hợp với phong cách của bạn. Đa dạng màu sắc thời thượng, từ cổ điển đến hiện đại. Tùy chỉnh sản phẩm theo sở thích cá nhân, tạo nên dấu ấn riêng. Lựa chọn phụ kiện đi kèm theo phong cách của bạn.",
    screen: "6.7 inchs",
    cameratruoc: "Camera góc rộng: 50 MP, f/2.4",
    camerasau:
      "Camera góc rộng: 50 MP, f/1.8, 1/1.56, 1.0µm, PDAF, OIS. Camera góc siêu rộng: 8 MP, f/2.2, 123 độ. Camera macro: 2 MP, f/2.4",
    chipset: "Qualcomm Snapdragon 7 Gen 1 (4 nm)",
    ram: "12GB",
    pin: "5000 mAh",
    os: "Android 14",
    price: 10190000,
    storage: "256GB",
    promotion:
      "Trả góp 0% lãi suất: Trả góp linh hoạt, 0% lãi suất trong 6 tháng!",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 15,
    name: "Samsung Galaxy S23 Ultra 12GB 512GB",
    brandId: "samsung",
    image: "asset/img/ss4-3.webp",
    thumnailList: [
      { thumnail: "asset/img/ss4-3.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/ss4-2.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/ss4-1.webp", alt: "Ảnh 3" },
    ],
    desc: "Thoải mái lựa chọn màu sắc yêu thích, phù hợp với phong cách của bạn. Đa dạng màu sắc thời thượng, từ cổ điển đến hiện đại. Tùy chỉnh sản phẩm theo sở thích cá nhân, tạo nên dấu ấn riêng. Lựa chọn phụ kiện đi kèm theo phong cách của bạn.",
    screen: "6.8 inchs",
    cameratruoc: "12MP F2.2 (Dual Pixel AF)",
    camerasau:
      "Siêu rộng: 12MP F2.2 (Dual Pixel AF), Chính: 200MP F1.7 OIS ±3° (Super Quad Pixel AF), Tele 1: 10MP F4.9 (10X, Dual Pixel AF) OIS, Tele 2: 10MP F2.4 (3X, Dual Pixel AF) OIS Thu phóng chuẩn không gian 100X",
    chipset: "Snapdragon 8 Gen 2 (4 nm)",
    ram: "12GB",
    pin: "5000 mAh",
    os: "Android",
    price: 23490000,
    storage: "512GB",
    promotion:
      "Bảo hành mở rộng: Bảo hành 2 năm cho mọi sản phẩm, yên tâm sử dụng!",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 16,
    name: "Samsung Galaxy Z Flip6 12GB 256GB",
    brandId: "samsung",
    image: "asset/img/ss5-1.webp",
    thumnailList: [
      { thumnail: "asset/img/ss5-1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/ss5-2.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/ss5-3.webp", alt: "Ảnh 3" },
    ],
    desc: "Thoải mái lựa chọn màu sắc yêu thích, phù hợp với phong cách của bạn. Đa dạng màu sắc thời thượng, từ cổ điển đến hiện đại. Tùy chỉnh sản phẩm theo sở thích cá nhân, tạo nên dấu ấn riêng. Lựa chọn phụ kiện đi kèm theo phong cách của bạn.",
    screen: "6.7 inchs",
    cameratruoc: "10.0 MP, f/2.2",
    camerasau: "Camera góc chụp rộng: 50.0 MP, f/1.8, thu phóng quang học 2x",
    chipset: "Snapdragon 8 Gen 3 for Galaxy Tăng lên 42% AI",
    ram: "12GB",
    pin: "4000 mAh",
    os: "iOS 18",
    price: 26990000,
    storage: "256GB",
    promotion:
      "Mua 1 tặng 1: Mua một chiếc điện thoại, tặng một phụ kiện đi kèm!",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 17,
    name: "Samsung Galaxy Z Flip5 512GB",
    brandId: "samsung",
    image: "asset/img/ss6-1.webp",
    thumnailList: [
      { thumnail: "asset/img/ss6-1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/ss6-2.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/ss6-3.webp", alt: "Ảnh 3" },
    ],
    desc: "Thoải mái lựa chọn màu sắc yêu thích, phù hợp với phong cách của bạn. Đa dạng màu sắc thời thượng, từ cổ điển đến hiện đại. Tùy chỉnh sản phẩm theo sở thích cá nhân, tạo nên dấu ấn riêng. Lựa chọn phụ kiện đi kèm theo phong cách của bạn.",
    screen: "6.7 inchs",
    cameratruoc: "10MP, F2.4, 1.22μm",
    camerasau:
      "Camera siêu rộng: 12MP, F2.2, 123 độ, 1.12 μm, FF. Camera chính: 12MP, F1.8, Dual Pixel, 1.8μm, OIS",
    chipset: "Snapdragon 8 Gen 2 for Galaxy",
    ram: "8GB",
    pin: "3700 mAh",
    os: "Android 13",
    price: 15290000,
    storage: "512GB",
    promotion: "Giá ưu đãi đặc biệt: Giảm ngay 20% cho đơn hàng đầu tiên!",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 18,
    name: "Samsung Galaxy A06 4GB 128GB",
    brandId: "samsung",
    image: "asset/img/ss7-1.webp",
    thumnailList: [
      { thumnail: "asset/img/ss7-1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/ss7-2.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/ss7-3.webp", alt: "Ảnh 3" },
    ],
    desc: "Thoải mái lựa chọn màu sắc yêu thích, phù hợp với phong cách của bạn. Đa dạng màu sắc thời thượng, từ cổ điển đến hiện đại. Tùy chỉnh sản phẩm theo sở thích cá nhân, tạo nên dấu ấn riêng. Lựa chọn phụ kiện đi kèm theo phong cách của bạn.",
    screen: "6.7 inchs",
    cameratruoc: "8.0 MP, f/2.0",
    camerasau: "50.0 MP, f/1.8. 2.0 MP, f/2.4",
    chipset: "MediaTek Helio G85",
    ram: "4GB",
    pin: "5000 mAh",
    os: "Android",
    price: 3190000,
    storage: "128GB",
    promotion: "Giá ưu đãi đặc biệt: Giảm ngay 20% cho đơn hàng đầu tiên!",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 19,
    name: "Samsung Galaxy A16 5G 8GB 128GB",
    brandId: "samsung",
    image: "asset/img/ss8-1.webp",
    thumnailList: [
      { thumnail: "asset/img/ss8-1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/ss8-2.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/ss8-3.webp", alt: "Ảnh 3" },
    ],
    desc: "Thoải mái lựa chọn màu sắc yêu thích, phù hợp với phong cách của bạn. Đa dạng màu sắc thời thượng, từ cổ điển đến hiện đại. Tùy chỉnh sản phẩm theo sở thích cá nhân, tạo nên dấu ấn riêng. Lựa chọn phụ kiện đi kèm theo phong cách của bạn.",
    screen: "6.7 inchs",
    cameratruoc: "13MP, f/2.0",
    camerasau:
      "Camera góc rộng: 50MP, f/1.8 AF. Camera góc siêu rộng: 5MP, f/2.2. Camera Macro: 2MP, f/2.4",
    chipset: "MediaTek Dimensity 6300(6nm)",
    ram: "8GB",
    pin: "5000 mAh",
    os: "Android",
    price: 6090000,
    storage: "128GB",
    promotion:
      "Trả góp 0% lãi suất: Trả góp linh hoạt, 0% lãi suất trong 6 tháng!",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 20,
    name: "Samsung Galaxy Z Fold5 12GB 512GB",
    brandId: "samsung",
    image: "asset/img/ss9-1.webp",
    thumnailList: [
      { thumnail: "asset/img/ss9-1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/ss9-2.jpg", alt: "Ảnh 2" },
      { thumnail: "asset/img/ss9-3.jpg", alt: "Ảnh 3" },
    ],
    desc: "Thoải mái lựa chọn màu sắc yêu thích, phù hợp với phong cách của bạn. Đa dạng màu sắc thời thượng, từ cổ điển đến hiện đại. Tùy chỉnh sản phẩm theo sở thích cá nhân, tạo nên dấu ấn riêng. Lựa chọn phụ kiện đi kèm theo phong cách của bạn.",
    screen: "7.6 inchs",
    cameratruoc: "Camera bên ngoài:10 MP, f/2.2. Camera bên trong: 4 MP, F1.8",
    camerasau:
      "Camera siêu rộng: 12MP F2.2, 123°, 1.12μm. Camera góc rộng: 50MP, F1.8, Dual Pixel AF, OIS, 2.0μm. Camera Tele: 10 MP, F2.4, PDAF, OIS, 1.0μm, zoom 3X, zoom kỹ thuật số 30X",
    chipset: "Snapdragon 8 Gen 2 for Galaxy (4nm) 8 nhân",
    ram: "12GB",
    pin: "4400 mAh",
    os: "Android 13",
    price: 29990000,
    storage: "512GB",
    promotion:
      "Quà tặng hấp dẫn: Mua điện thoại, nhận ngay tai nghe không dây miễn phí!",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 21,
    name: "Samsung Galaxy Z Fold5 12GB 256GB",
    brandId: "samsung",
    image: "asset/img/ss10-1.webp",
    thumnailList: [
      { thumnail: "asset/img/ss10-1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/ss10-2.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/ss10-3.webp", alt: "Ảnh 3" },
    ],
    desc: "Thoải mái lựa chọn màu sắc yêu thích, phù hợp với phong cách của bạn. Đa dạng màu sắc thời thượng, từ cổ điển đến hiện đại. Tùy chỉnh sản phẩm theo sở thích cá nhân, tạo nên dấu ấn riêng. Lựa chọn phụ kiện đi kèm theo phong cách của bạn.",
    screen: "7.6 inchs",
    cameratruoc: "Camera bên ngoài:10 MP, f/2.2. Camera bên trong: 4 MP, F1.8",
    camerasau:
      "Camera siêu rộng: 12MP F2.2, 123°, 1.12μm. Camera góc rộng: 50MP, F1.8, Dual Pixel AF, OIS, 2.0μm. Camera Tele: 10 MP, F2.4, PDAF, OIS, 1.0μm, zoom 3X, zoom kỹ thuật số 30X",
    chipset: "Snapdragon 8 Gen 2 for Galaxy (4nm) 8 nhân",
    ram: "12GB",
    pin: "4400 mAh",
    os: "Android 13",
    price: 27990000,
    storage: "256GB",
    promotion:
      "Quà tặng hấp dẫn: Mua điện thoại, nhận ngay tai nghe không dây miễn phí!",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 22,
    name: "Samsung Galaxy Note 20 Ultra 5G 256GB",
    brandId: "samsung",
    image: "asset/img/ss11-1.webp",
    thumnailList: [
      { thumnail: "asset/img/ss11-1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/ss11-2.jpg", alt: "Ảnh 2" },
      { thumnail: "asset/img/ss11-3.webp", alt: "Ảnh 3" },
    ],
    desc: "Thoải mái lựa chọn màu sắc yêu thích, phù hợp với phong cách của bạn. Đa dạng màu sắc thời thượng, từ cổ điển đến hiện đại. Tùy chỉnh sản phẩm theo sở thích cá nhân, tạo nên dấu ấn riêng. Lựa chọn phụ kiện đi kèm theo phong cách của bạn.",
    screen: "6.9 inchs",
    cameratruoc: "10 MP, f/2.2, 26mm (wide), 1/3.2, 1.22µm, Dual Pixel PDAF",
    camerasau:
      "108 MP, f/1.8, 26mm (wide), 1/1.33, 0.8µm, PDAF, Laser AF, OIS 12 MP, f/3.0, 103mm (periscope telephoto), 1.0µm, PDAF, OIS, 5x optical zoom, 50x hybrid zoom 12 MP, f/2.2, 13mm (ultrawide), 1/2.55, 1.4µm",
    chipset: "Exynos 990 (7 nm+)",
    ram: "12GB",
    pin: "4500 mAh",
    os: "Android 10, One UI 2.1",
    price: 32990000,
    storage: "256GB",
    promotion:
      "Trả góp 0% lãi suất: Trả góp linh hoạt, 0% lãi suất trong 6 tháng!",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 23,
    name: "OPPO A3 (6GB 128GB)",
    brandId: "oppo",
    image: "asset/img/oppo1-1.webp",
    thumnailList: [
      { thumnail: "asset/img/oppo1-1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/oppo1-2.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/oppo1-3.webp", alt: "Ảnh 3" },
    ],
    desc: "Thoải mái lựa chọn màu sắc yêu thích, phù hợp với phong cách của bạn. Đa dạng màu sắc thời thượng, từ cổ điển đến hiện đại. Tùy chỉnh sản phẩm theo sở thích cá nhân, tạo nên dấu ấn riêng. Lựa chọn phụ kiện đi kèm theo phong cách của bạn.",
    screen: "6.67 inchs",
    cameratruoc: "5 MP, Khẩu độ F/2.2",
    camerasau: "50MP, Khẩu độ F/1.8",
    chipset: "Snapdragon 6s 4G Gen1, tối đa 2.1GHz",
    ram: "6GB",
    pin: "5100 mAh",
    os: "Android",
    price: 4490000,
    storage: "128GB",
    promotion:
      "Bảo hành mở rộng: Bảo hành 2 năm cho mọi sản phẩm, yên tâm sử dụng!",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 24,
    name: "OPPO Reno10 5G 8GB 256GB",
    brandId: "oppo",
    image: "asset/img/oppo2-1.webp",
    thumnailList: [
      { thumnail: "asset/img/oppo2-1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/oppo2-2.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/oppo2-3.webp", alt: "Ảnh 3" },
    ],
    desc: "Thoải mái lựa chọn màu sắc yêu thích, phù hợp với phong cách của bạn. Đa dạng màu sắc thời thượng, từ cổ điển đến hiện đại. Tùy chỉnh sản phẩm theo sở thích cá nhân, tạo nên dấu ấn riêng. Lựa chọn phụ kiện đi kèm theo phong cách của bạn.",
    screen: "6.7 inchs",
    cameratruoc: "Camera góc rộng: 32 MP, f/2.4",
    camerasau:
      "Camera góc rộng: 64MP; f/1.7, PDAF. Chụp Telephoto chân dung: 32 MP, f/2.0. Camera góc siêu rộng: 8 MP, f/2.2, Zoom quang lai 2X× và Xoom kỹ thuật số 20X",
    chipset: "MediaTek Dimensity 7050 5G 8 nhân",
    ram: "8GB",
    pin: "5000 mAh",
    os: "Android 13",
    price: 9290000,
    storage: "256GB",
    promotion:
      "Bảo hành mở rộng: Bảo hành 2 năm cho mọi sản phẩm, yên tâm sử dụng!",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 25,
    name: "Xiaomi Redmi 14C 4GB 128GB",
    brandId: "xiaomi",
    image: "asset/img/xiaomi1-1.webp",
    thumnailList: [
      { thumnail: "asset/img/xiaomi1-1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/xiaomi1-2.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/xiaomi1-3.webp", alt: "Ảnh 3" },
    ],
    desc: "Thoải mái lựa chọn màu sắc yêu thích, phù hợp với phong cách của bạn. Đa dạng màu sắc thời thượng, từ cổ điển đến hiện đại. Tùy chỉnh sản phẩm theo sở thích cá nhân, tạo nên dấu ấn riêng. Lựa chọn phụ kiện đi kèm theo phong cách của bạn.",
    screen: "6.88 inchs",
    cameratruoc: "13MP - f/2.0",
    camerasau: "50MP, Ống kính -5P, f/1.8",
    chipset: "MediaTek Helio G81-Ultra",
    ram: "4GB",
    pin: "5160 mAh",
    os: "Android",
    price: 3190000,
    storage: "128GB",
    promotion:
      "Bảo hành mở rộng: Bảo hành 2 năm cho mọi sản phẩm, yên tâm sử dụng!",
    rating: 5,
    isFavorite: true,
  },
  {
    id: 26,
    name: "Xiaomi 14T (12GB 512GB)",
    brandId: "xiaomi",
    image: "asset/img/xiaomi2-1.webp",
    thumnailList: [
      { thumnail: "asset/img/xiaomi2-1.webp", alt: "Ảnh 1" },
      { thumnail: "asset/img/xiaomi2-2.webp", alt: "Ảnh 2" },
      { thumnail: "asset/img/xiaomi2-3.webp", alt: "Ảnh 3" },
    ],
    desc: "Thoải mái lựa chọn màu sắc yêu thích, phù hợp với phong cách của bạn. Đa dạng màu sắc thời thượng, từ cổ điển đến hiện đại. Tùy chỉnh sản phẩm theo sở thích cá nhân, tạo nên dấu ấn riêng. Lựa chọn phụ kiện đi kèm theo phong cách của bạn.",
    screen: "6.67 inchs",
    cameratruoc:
      "32MPƒ/2,0. FOV 80,8˚. Chế độ ban đêm. HDR. Tính năng chụp ảnh bằng lòng bàn tay",
    camerasau:
      "Camera chính: 50MP, 23mm, ƒ/1 7 Cảm biến hình ảnh IMX906 của Sony 2 0 m Super Pixel. Máy ảnh tele: 50MP, 50mm, ƒ/1 9. Máy ảnh góc siêu rộng: 12MP, 15mm, ƒ/2 2",
    chipset: "MediaTek Dimensity 8300-Ultra",
    ram: "12GB",
    pin: "5000 mAh",
    os: "Android",
    price: 13990000,
    storage: "512GB",
    promotion:
      "Bảo hành mở rộng: Bảo hành 2 năm cho mọi sản phẩm, yên tâm sử dụng!",
    rating: 5,
    isFavorite: true,
  },
];

if (listProducts.length <= 0) {
  alert("danh sach trong");
} else {
  // đẩy mảng lên local storage
  localStorage.setItem("data", JSON.stringify(listProducts));
}

// lấy dữ liệu tù local storage
listProducts = JSON.parse(localStorage.getItem("data"));

// ======================== KHAI BÁO BIẾN ==============================
let productsByBrand = [];
let originalProductsByBrand = []; // Mảng tạm lưu danh sách sản phẩm theo hãng ban đầu
let productPerPage = 10;
let currentPage = 1; // Trang hiện tại

// ====================== HÀM IN SẢN PHẨM THEO HÃNG ===========================
const urlParams = new URLSearchParams(window.location.search);
const brandProduct = urlParams.get("brand");
const beginPage = urlParams.get("page");
const found = urlParams.get("search");
console.log("tu khoa vua tim ben index: ", found);

console.log("brand: ", brandProduct);
console.log("kiểu của brand: ", typeof brandProduct);

function displayListByBrand(brand) {
  productsByBrand = [];

  // Kiểm tra nếu brand là null
  if (brand === "null") {
    console.log("đang chạy trong brand === null");
    productsByBrand = listProducts; // Nếu brand là null, lấy tất cả sản phẩm
    originalProductsByBrand = productsByBrand; // Lưu vào mảng tạm
  } else {
    for (let element of listProducts) {
      if (element.brandId === brand) {
        productsByBrand.push(element);
      }
    }
    originalProductsByBrand = productsByBrand; // Lưu vào mảng tạm
  }

  console.log("danh sách theo hãng lúc này: ", productsByBrand);

  // if (productsByBrand.length === 0) {
  //   alert("danh sach trong");
  //   return;
  // }

  currentPage = 1;
  displayProductPerPage(currentPage);
}

displayListByBrand(brandProduct);
// console.log(productsByBrand);

if (found) {
  searchProduct();
}

// ======================== HÀM HIỆN THỊ BỘ LỌC ===========================================
function showFilter() {
  document.getElementsByClassName("filter")[0].innerHTML = `
    <div class="filter-box filter-synthetic">
      <i class="fa-solid fa-filter"></i>
      <span class="text-filter">Lọc</span>

      <form onsubmit="syntheticFilter(event)">
        <div class="options-filter">
          <div class="pin option">
            <h4>Dung lượng pin</h4>
            <div class="value-select">
              <span id="bt34" onclick="selectValue(this, 'battery')">3000-4000 mAh</span>
              <span id="bt45" onclick="selectValue(this, 'battery')">4000-5000 mAh</span>
              <span id="bt56" onclick="selectValue(this, 'battery')">5000-6000 mAh</span>
              <span id="bt67" onclick="selectValue(this, 'battery')">6000-7000 mAh</span>
            </div>
          </div>
          <div class="ram option">
            <h4>Ram</h4>
            <div class="value-select">
              <span id="ram4" onclick="selectValue(this, 'ram')">4GB</span>
              <span id="ram6" onclick="selectValue(this, 'ram')">6GB</span>
              <span id="ram8" onclick="selectValue(this, 'ram')">8GB</span>
              <span id="ram12" onclick="selectValue(this, 'ram')">12GB</span>
            </div>
          </div>
          <div class="rom option">
            <h4>Rom</h4>
            <div class="value-select">
              <span id="rom32" onclick="selectValue(this, 'rom')">32GB</span>
              <span id="rom64" onclick="selectValue(this, 'rom')">64GB</span>
              <span id="rom128" onclick="selectValue(this, 'rom')">128GB</span>
              <span id="rom256" onclick="selectValue(this, 'rom')">256GB</span>
              <span id="rom512" onclick="selectValue(this, 'rom')">512GB</span>
              <span id="rom1024" onclick="selectValue(this, 'rom')">1TB</span>
            </div>          
          </div>
          <div class="screen option">
             <h4>Kích thước màn hình</h4>
            <div class="value-select">
              <span id="scr55" onclick="selectValue(this, 'screen')">Bé hơn 5.5 inch</span>
              <span id="scr5563" onclick="selectValue(this, 'screen')">5.5-6.3 inch</span>
              <span id="scr6467" onclick="selectValue(this, 'screen')">6.4-6.7 inch</span>
              <span id="scr68" onclick="selectValue(this, 'screen')">Lớn hơn 6.8 inch</span>
            </div>
          </div>
        </div>
        <input type="submit" value="Áp dụng" />
      </form>
    </div>

    <div class="filter-box filter-about">
      <i class="fa-solid fa-coins"></i>
      <span class="text-filter">Khoảng giá</span>
      <form onsubmit="filterAboutPrice(event)">
        <div class="slider-container">
          <input
            type="range"
            id="rangeSlider"
            min="2000000"
            max="100000000"
            value="5000000"
            step="200000"
            oninput="updateSliderValue(event)"
          />
          <span id="sliderValue"></span>
          <input type="submit" value="Áp dụng" />
        </div>
      </form>
    </div>

    <div
      class="filter-box filter-hTol"
      id="dec"
      onclick="sortProductsByPrice(this)"
    >
      <i class="fa-solid fa-arrow-down-wide-short"></i>
      <span class="text-filter">Giá giảm dần</span>
    </div>

    <div
      class="filter-box filter-lToh"
      id="inc"
      onclick="sortProductsByPrice(this)"
    >
      <i class="fa-solid fa-arrow-up-wide-short"></i>
      <span class="text-filter">Giá tăng dần</span>
    </div>
  `;
}

showFilter();

// ====================================== HÀM THÊM ACTIVE CHO CÁC MỤC ĐƯỢC CHỌN ===============================

function selectValue(selectedSpan, filterType) {
  const allSpans = selectedSpan.parentElement.getElementsByTagName("span");
  const isActive = selectedSpan.classList.contains("active");

  // Xóa class active khỏi tất cả các thẻ span
  for (let span of allSpans) {
    span.classList.remove("active");
  }

  // Nếu thẻ chưa có class active, thêm class active vào thẻ được chọn
  if (!isActive) {
    selectedSpan.classList.add("active");
  } else {
    // Nếu thẻ đã có class active, xóa class active
    selectedSpan.classList.remove("active");
  }
}

// ========================= HÀM CẮT DỮ LIỆU CẦN LỌC =====================================

function getSelectedBattery() {
  const activeSpan = document.querySelector(
    ".filter .pin .value-select .active"
  );

  // Kiểm tra nếu không tìm thấy activeSpan
  if (!activeSpan) {
    return null; // Hoặc trả về một giá trị mặc định
  }

  // Lấy nội dung văn bản
  let content = activeSpan.textContent;

  // Tìm vị trí khoảng trắng đầu tiên
  const indexCut = content.indexOf(" ");
  content = content.slice(0, indexCut); // Cắt từ đầu đến khoảng trắng

  // Chia và chuyển đổi thành số
  let value = content.split("-").map(Number);
  return value;
}

function getRamValue() {
  const activeSpan = document.querySelector(
    ".filter .ram .value-select .active"
  );

  // Kiểm tra nếu không tìm thấy activeSpan
  if (!activeSpan) {
    return null; // Hoặc trả về một giá trị mặc định
  }

  let content = activeSpan.textContent;

  const indexCut = content.indexOf("GB");
  content = content.slice(0, indexCut);

  let value = Number(content);

  return value;
}

function getRomValue() {
  const activeSpan = document.querySelector(
    ".filter .rom .value-select .active"
  );

  // Kiểm tra nếu không tìm thấy activeSpan
  if (!activeSpan) {
    return null; // Hoặc trả về một giá trị mặc định
  }

  let content = activeSpan.textContent;

  const indexCut = content.indexOf("GB");
  content = content.slice(0, indexCut);

  let value = Number(content);

  return value;
}

function getScreenValue() {
  // Tìm phần tử có class '.active' trong các thẻ <span> chứa kích thước màn hình
  const activeSpan = document.querySelector(".screen .value-select .active");

  // Kiểm tra nếu không có phần tử nào được chọn
  if (!activeSpan) {
    return null; // Hoặc bạn có thể trả về một giá trị mặc định
  }

  // Lấy nội dung văn bản của thẻ activeSpan
  const content = activeSpan.textContent;

  // Cắt nội dung để lấy giá trị kích thước màn hình
  // Nếu có định dạng cụ thể, bạn có thể cắt theo cách khác
  // Ví dụ: "5.5-6.3 inch" => ["5.5", "6.3"]
  const sizeValues = content.match(/(\d+(\.\d+)?)/g).map(Number); // Lấy tất cả số trong chuỗi

  if (content.includes("Bé hơn")) sizeValues.unshift(0);
  if (content.includes("Lớn hơn")) sizeValues.push(0);

  return sizeValues; // Chuyển đổi các giá trị thành số
}

// =========================== HÀM LỌC SẢN PHẨM THEO NHIỀU TIÊU CHÍ ====================================
function syntheticFilter(event) {
  event.preventDefault(); // Ngăn chặn hành động gửi biểu mẫu

  const batteryValue = getSelectedBattery();
  const ramValue = getRamValue();
  const romValue = getRomValue();
  const screenValue = getScreenValue();

  // Kiểm tra mảng sản phẩm
  if (!Array.isArray(productsByBrand)) {
    console.error("productsByBrand không phải là một mảng.");
    return;
  }

  // lưu mảng vào một biến gốc
  const originalProductsByBrand = productsByBrand.slice(); // Sao chép mảng
  let filteredArr = [];

  for (let element of productsByBrand) {
    if (!element.pin || !element.ram || !element.storage || !element.screen) {
      console.error(
        "Một trong các thuộc tính sản phẩm là null hoặc undefined."
      );
      continue; // Bỏ qua sản phẩm này
    }

    // lấy dữ liệu từng sản phẩm và cắt lấy đúng giá trị số
    const pinCut = element.pin.indexOf(" ");
    let pinOfProduct = Number(element.pin.slice(0, pinCut));
    const ramGB = element.ram.indexOf("GB");
    let ramOfProduct = Number(element.ram.slice(0, ramGB));
    const romGB = element.storage.indexOf("GB");
    let romOfProduct = Number(element.storage.slice(0, romGB));
    const scrMAH = element.screen.indexOf(" ");
    let scrOfProduct = Number(element.screen.slice(0, scrMAH));

    if (
      batteryValue &&
      pinOfProduct >= batteryValue[0] &&
      pinOfProduct <= batteryValue[1]
    ) {
      filteredArr.push(element);
    } else if (ramValue && ramOfProduct === ramValue) {
      filteredArr.push(element);
    } else if (romValue && romOfProduct === romValue) {
      filteredArr.push(element);
    } else if (
      screenValue &&
      scrOfProduct >= screenValue[0] &&
      scrOfProduct <= screenValue[1]
    ) {
      filteredArr.push(element);
    }
  }

  productsByBrand = filteredArr; // Cập nhật danh sách sản phẩm
  currentPage = 1;
  displayProductPerPage(currentPage);

  productsByBrand = originalProductsByBrand; // cập nhật lại danh sách ban đầu
}

// ======================== HÀM HIỆN THỊ CÁC SẢN PHẨM TRÊN TRANG ==========================
function displayProductPerPage(page) {
  window.scrollTo(0, 0); // Cuộn lên đầu trang

  currentPage = page;
  const startIndex = (page - 1) * productPerPage;
  const endIndex = startIndex + productPerPage;
  const cutArr = productsByBrand.slice(startIndex, endIndex); // Lấy phần tử cho trang hiện tại

  display(cutArr); // Hiển thị danh sách sản phẩm cắt từ productsByBrand
  productPagination(); // Cập nhật phân trang dựa trên productsByBrand

  // Cập nhật URL với số trang
  const brand = new URLSearchParams(window.location.search).get("brand");
  const newUrl = `SanPham.html?brand=${brand}&page=${page}`;
  history.pushState(null, "", newUrl); // Thay đổi URL mà không làm mới trang
}

// ========================= QUAY LẠI TRANG TRƯỚC ============================
// Lắng nghe sự kiện popstate
window.addEventListener("popstate", function (event) {
  // window.scroll(0, 0);

  const urlParams = new URLSearchParams(window.location.search);
  const brand = urlParams.get("brand");
  const page = parseInt(urlParams.get("page")) || 1; // Mặc định là trang 1

  // Gọi hàm để hiển thị sản phẩm theo brand và trang
  displayListByBrand(brand);
});

// ===================== HÀM TẠO PHÂN TRANG ================================
function productPagination(brand, page) {
  const totalProduct = productsByBrand.length;
  const totalPage = Math.ceil(totalProduct / productPerPage); // Tổng số trang

  let paginationHTML = "";
  for (let i = 1; i <= totalPage; i++) {
    const isActive = i === currentPage;
    paginationHTML += `
      <button class="btn-page ${
        isActive ? "active" : ""
      }" onclick="displayProductPerPage(${i})">
        ${i}
      </button>
    `;
  }
  document.getElementById("pagination").innerHTML = paginationHTML;
}

// =================== HÀM HIỆN THỊ SẢN PHẨM ===============================
function display(list) {
  let productHTML = "";
  for (let product of list) {
    productHTML += `
        <a href="detail.html?id=${product.id}">
          <div class="product-card">
            <div class="product-img">
              <img src="${product.image}" alt="${
      product.name
    }" style="width:100%">
            </div>
            <div class="product-info">
              <h4 class="line-clamp">${product.name}</h4>
              <p class="price">${formatPrice(product.price)}</p>
            <div class="storage-capacity">
                ${product.screen ? `<span>${product.screen}</span>` : ""}
                ${product.ram ? `<span>${product.ram}</span>` : ""}
                ${product.storage ? `<span>${product.storage}</span>` : ""}
              </div>
              <div class="promotion line-clamp">${product.promotion}</div>
              <div class="rating-favorite">
                <div class="rating">
                  ${createRatingStars(product.rating)}
                </div>
                <div class="favorite">
                  <span>Yêu thích</span>
                  <i class="fa-${
                    product.isFavorite ? "solid" : "regular"
                  } fa-heart" id="heart-icon"></i>
                </div>
              </div>
            </div>
          </div>
        </a>
      `;
  }
  document.getElementsByClassName("list-product")[0].innerHTML = productHTML;
}

// =========================== HÀM SẮP XẾP SẢN PHẨM THEO GIÁ ==========================
function sortProductsByPrice(obj) {
  if (obj.id === "inc") {
    productsByBrand.sort((a, b) => a.price - b.price); // Sắp xếp tăng dần
    sort = "inc";
  } else if (obj.id === "dec") {
    productsByBrand.sort((a, b) => b.price - a.price); // Sắp xếp giảm dần
    sort = "dec";
  }
  currentPage = 1; // Đặt lại trang hiện tại về 1 khi sắp xếp
  displayProductPerPage(currentPage); // Hiển thị sản phẩm đã sắp xếp theo trang đầu
}

// =========================== HÀM LỌC SẢN PHẨM THEO KHOẢNG GIÁ ======================
function filterAboutPrice(event) {
  event.preventDefault(); // Ngăn chặn hành vi gửi form

  const maxPrice = Number(document.getElementById("rangeSlider").value);
  const minPrice = 2000000; // Thay đổi tùy theo yêu cầu khoảng giá thấp nhất
  console.log("min: ", minPrice);
  console.log("max: ", maxPrice);

  // Lọc sản phẩm theo khoảng giá từ mảng tạm
  const filteredProducts = originalProductsByBrand.filter(
    (element) => element.price >= minPrice && element.price <= maxPrice
  );

  console.log("filtered: ", filteredProducts);

  if (filteredProducts.length === 0) {
    alert("Không có sản phẩm nào trong khoảng giá này.");
    productsByBrand = []; // Nếu không có sản phẩm nào, gán danh sách sản phẩm là rỗng
  } else {
    productsByBrand = filteredProducts; // Cập nhật danh sách sản phẩm đã lọc
  }

  currentPage = 1; // Đặt lại trang hiện tại về 1
  displayProductPerPage(currentPage); // Hiển thị sản phẩm đã lọc theo trang đầu
  productPagination(); // Cập nhật phân trang dựa trên productsByBrand
}

// hàm cập nhật giá trị slider cho khoảng giá
function updateSliderValue() {
  const slider = document.getElementById("rangeSlider");
  document.getElementById("sliderValue").textContent = slider.value;
}

// =========================== HÀM TÌM KIẾM THEO TÊN SẢN PHẨM =============================
function searchProduct(event) {
  if (event) {
    event.preventDefault(); // Ngăn chặn hành vi mặc định nếu có event
  }
  let nameFind = document.getElementById("search-box").value;
  if (found) nameFind = found;

  productsByBrand = [];
  for (let element of listProducts) {
    if (element.name.toLowerCase().includes(nameFind.toLowerCase())) {
      productsByBrand.push(element);
    }
  }

  if (productsByBrand.length === 0) {
    document.getElementsByClassName("product-display")[0].innerHTML = `
      <div style="color: red; font-size: 20px; font-weight: 600; font-style: italic; text-align: center">
        Danh sách trống
      </div> `;
  } else {
    currentPage = 1;
    displayProductPerPage(currentPage);
  }

  // Cập nhật URL với nội dung tìm kiếm
  const newUrl = `SanPham.html?find=${encodeURIComponent(nameFind)}`;
  history.pushState(null, "", newUrl); // Thay đổi URL mà không làm mới trang
}

// =========================== HÀM HỘ TRỠ =============================
// Hàm định dạng giá tiền
function formatPrice(price) {
  return price.toLocaleString("vi-VN", { style: "currency", currency: "VND" });
}

// Hàm tạo các ngôi sao đánh giá
function createRatingStars(rating) {
  let stars = "";
  for (let i = 0; i < 5; i++) {
    stars += `<i class="fa-solid fa-star${
      i < rating ? "" : "-half-stroke"
    }"></i>`;
  }
  return stars;
}

// xử lý input range
const rangeSlider = document.getElementById("rangeSlider");
const sliderValue = document.getElementById("sliderValue");

rangeSlider.addEventListener("input", function () {
  const value = rangeSlider.value;
  sliderValue.textContent = value;

  // Tính toán vị trí của giá trị theo dấu chấm kéo
  const sliderWidth = rangeSlider.offsetWidth;
  const thumbWidth = 16; // Kích thước dấu chấm kéo
  const max = rangeSlider.max;
  const min = rangeSlider.min;

  const percent = (value - min) / (max - min);
  const offset = percent * (sliderWidth - thumbWidth);

  sliderValue.style.left = `${offset}px`;
});

// Hiển thị giá trị khi người dùng nhấn vào thanh trượt
rangeSlider.addEventListener("mousedown", function () {
  sliderValue.style.opacity = "0.8";
});

// Ẩn giá trị khi người dùng thả chuột
rangeSlider.addEventListener("mouseup", function () {
  sliderValue.style.opacity = "0";
});

// Xử lý ẩn giá trị khi người dùng rời chuột ngoài thanh trượt
rangeSlider.addEventListener("mouseleave", function () {
  sliderValue.style.opacity = "0";
});
