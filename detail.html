<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- nhúng icon từ bên ngoài -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
      integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="./asset/SanPham.css" />
    <!-- <link rel="stylesheet" href="./asset/responsiveSanPham.css" /> -->
    <title>Document</title>
  </head>
  <body>
    <header>
      <div class="header">
        <div class="body-header">
          <div class="main-content">
            <div class="logo">
              <img src="./asset/img/logo.jpg" alt="" />
            </div>

            <div class="catogory catogory-product">
              <a href="SanPham.html?brand=null&page=1">
                <i class="fa-solid fa-table-list"></i>
                <span class="text-catogory">Sản phẩm</span>
              </a>

              <div class="hover-branch-list">
                <div class="buffer"></div>
                <ul style="color: black">
                  <a
                    href="SanPham.html?brand=iphone&page=1"
                    class="brand-link"
                    id="iphone"
                    ><li>iPhone</li></a
                  >
                  <a
                    href="SanPham.html?brand=samsung&page=1"
                    class="brand-link"
                    id="samsung"
                    ><li>Samsung</li></a
                  >

                  <a
                    href="SanPham.html?brand=oppo&page=1"
                    class="brand-link"
                    id="oppo"
                    ><li>Oppo</li></a
                  >

                  <a
                    href="SanPham.html?brand=redmi&page=1"
                    class="brand-link"
                    id="redmi"
                    ><li>Redmi</li></a
                  >

                  <a
                    href="SanPham.html?brand=xiaomi&page=1"
                    class="brand-link"
                    id="xiaomi"
                    ><li>Xiaomi</li></a
                  >

                  <a
                    href="SanPham.html?brand=vivo&page=1"
                    class="brand-link"
                    id="vivo"
                    ><li>Vivo</li></a
                  >

                  <a
                    href="SanPham.html?brand=huawei&page=1"
                    class="brand-link"
                    id="huawei"
                    ><li>Huawei</li></a
                  >

                  <a
                    href="SanPham.html?brand=nokia&page=1"
                    class="brand-link"
                    id="nokia"
                    ><li>Nokia</li></a
                  >

                  <a
                    href="SanPham.html?brand=techno&page=1"
                    class="brand-link"
                    id="TECH NO"
                    ><li>TECH NO</li></a
                  >
                </ul>
              </div>
            </div>

            <form onsubmit="searchProduct(event)">
              <div class="search-box">
                <input
                  type="text"
                  name="search-box"
                  id="search-box"
                  placeholder="Bạn muốn tìm gì ?"
                  size="38"
                  autocomplete="off"
                />
                <input type="submit" value="Tìm kiếm" />
              </div>
            </form>

            <div class="catogory catogory-history">
              <i class="fa-solid fa-clock-rotate-left"></i>
              <span class="text-catogory">Lịch sử mua hàng</span>
            </div>

            <div class="catogory catogory-cart">
              <i class="fa-solid fa-cart-shopping"></i>
              <span class="text-catogory">Giỏ hàng</span>
            </div>

            <div class="catogory catogory-user">
              <i class="fa-solid fa-user"></i>
              <span class="text-catogory">User</span>
            </div>
          </div>
        </div>
      </div>
    </header>

    <main>
      <div class="body-main">
        <div class="main-content">
          <!-- trưng bày sản phẩm -->
          <div class="product-detail"></div>
        </div>
      </div>
    </main>

    <footer>
      <div class="body-footer">
        <div class="main-content">
          <div class="address-shop">
            <div class="address">
              <img src="./asset/img/map.png" alt="Địa chỉ cửa hàng" />
            </div>
            <div class="info-shop">
              <div class="connect location">
                <div class="head">
                  <i class="fa-solid fa-location-dot"></i>
                  <h4>Địa chỉ</h4>
                </div>
                <p>273 An Dương Vương, P.03, Q.05, TP Hồ Chí Minh</p>
              </div>
              <div class="connect phone">
                <div class="head">
                  <i class="fa-solid fa-phone"></i>
                  <h4>Hotline</h4>
                </div>
                <p>090.123.4567 (8:00 - 22:00)</p>
              </div>
              <div class="connect email">
                <div class="head">
                  <i class="fa-solid fa-envelope"></i>
                  <h4>Email</h4>
                </div>
                <p>group55@gmail.com</p>
              </div>
            </div>
          </div>
        </div>
        <div class="return-head">
          <a href="#"><i class="fa-solid fa-angle-up"></i></a>
        </div>
        <div class="policy-shop">
          <div class="info">
            <h4>Thông tin cửa hàng</h4>
            <p>Cửa hàng GROUP 55</p>
            <p>273 An Dương Vương P3 Q5 TPHCM</p>
            Hotline: 090.123.4567
          </div>
          <div class="policy">
            <h4>Chính sách</h4>
            <p>Quy chế hoạt động</p>
            <p>Chính sách bảo hành</p>
            <p>Liên hệ hợp tác kinh doanh</p>
            <p>Đơn doanh nghiệp</p>
          </div>
          <div class="guarantee">
            <h4>Bảo hành</h4>
            <p>Tra thông tin bảo hành</p>
            <p>Trung tâm bảo hành chính hãng</p>
            <p>Quy định về việc sao lưu dữ liệu</p>
            <p>Dịch vụ bảo hành điện thoại</p>
          </div>
          <div class="hotline">
            <h4>Hotline</h4>
            <p>Gọi mua hàng: 123455667890</p>
            <p>Gọi khiếu nại: 1122334455</p>
            <p>Gọi bảo hành: 0987654321</p>
            <p>(8:00 - 22:00)</p>
          </div>
        </div>
        <div class="source">2024 | Copyright by <span>GROUP 55</span></div>
      </div>
    </footer>

    <script>
      // lấy dữ liệu tù local storage
      listProducts = JSON.parse(localStorage.getItem("data"));

      // Hàm định dạng giá tiền
      function formatPrice(price) {
        return price.toLocaleString("vi-VN", {
          style: "currency",
          currency: "VND",
        });
      }

      // Hàm tạo các ngôi sao đánh giá
      function createRatingStars(rating) {
        let stars = "";
        for (let i = 0; i < 5; i++) {
          stars += `<i class="fa-solid fa-star${
            i < rating ? "" : "-half-stroke"
          }"></i>`;
        }
        return stars;
      }

      function showProductDetails() {
        const urlParams = new URLSearchParams(window.location.search);
        const productId = urlParams.get("id");

        console.log("URL search params:", window.location.search);
        console.log("Product ID:", productId);

        // Tìm sản phẩm với id tương ứng
        const product = listProducts.find(
          (prod) => prod.id === parseInt(productId)
        );

        if (product) {
          document.querySelector(".product-detail").innerHTML = `
            <div class="box-detail">
              <div class="img-transfer">
                <div class="rating-favorite">
                  <div class="rating">
                    <i class="fa-solid fa-star"></i>
                    <i class="fa-solid fa-star"></i>
                    <i class="fa-solid fa-star"></i>
                    <i class="fa-solid fa-star"></i>
                    <i class="fa-solid fa-star"></i>
                  </div>
                  <div class="heart">
                    <i class="fa-regular fa-heart"></i>
                  </div>
                </div>
                <div class="img-detail">
                  <div class="main-img">
                    <img src="${product.image}" alt="${
            product.name
          }" id="displayMainImg" />
                  </div>
                  <div class="thumnailList">
                    <img src="${product.thumnailList[0].thumnail}" alt="${
            product.thumnailList[0].alt
          }" onclick="displayMainImage('${product.thumnailList[0].thumnail}')"/>
                    <img src="${product.thumnailList[1].thumnail}" alt="${
            product.thumnailList[1].alt
          }" onclick="displayMainImage('${product.thumnailList[1].thumnail}')"/>
                    <img src="${product.thumnailList[2].thumnail}" alt="${
            product.thumnailList[2].alt
          }" onclick="displayMainImage('${product.thumnailList[2].thumnail}')"/>
                  </div>
                </div>
              </div>
              <div class="info-detail">
                <h3>${product.name}</h3>
                <p class="price">${formatPrice(product.price)}</p>
                <p class="brand">Brand: <span>${product.brandId}</span></p>
                <hr />
                <p class="desc">${product.desc}</p>
                <hr />
                <button>Mua ngay</button>
                <button>Thêm vào giỏ hàng</button>
              </div>
            </div>
            <div class="specifications">
              <div class="parameter">
                <h4>Thông số kỹ thuật</h4>
                <hr />
                <p>Màn hình: <span>${product.screen}</span></p>
                <p>Camera trước: <span>${product.cameratruoc}</span></p>
                <p>Camera sau: <span>${product.camerasau}</span></p>
                <p>Ram: <span>${product.ram}</span></p>
                <p>Chipset: <span>${product.chipset}</span></p>
                <p>Bộ nhớ trong: <span>${product.storage}</span></p>
                <p>Dung lượng pin: <span>${product.pin}</span></p>
                <p>Hệ điều hành: <span>${product.os}</span></p>
              </div>
              <div class="offer">
                <h4>Ưu đãi dành cho khách hàng</h4>
                <hr />
                <p>
                  <b>Giảm Giá Đặc Biệt:</b> <span>Các dòng điện thoại mới nhất giảm giá lên đến 30%, giúp bạn sở hữu thiết bị yêu thích với mức giá vô cùng hợp lý.</span> <br />
                  <b>Trả Góp 0% Lãi Suất:</b> <span>Dễ dàng chia nhỏ khoản thanh toán với chương trình trả góp lãi suất 0% qua thẻ tín dụng, giúp bạn sở hữu điện thoại mà không lo về tài chính.</span> <br />
                  <b>Quà Tặng Kèm Hấp Dẫn:</b> <span>Khi mua điện thoại, nhận ngay phụ kiện độc quyền như tai nghe Bluetooth, sạc nhanh, ốp lưng bảo vệ, và nhiều phần quà giá trị khác.</span> <br />
                  <b>Miễn Phí Giao Hàng:</b> <span>Giao hàng nhanh chóng và miễn phí toàn quốc, đảm bảo sản phẩm đến tay bạn một cách an toàn và tiện lợi.</span> <br />
                </p>
              </div>
              <div class="advertisement">
                <h4>Mô tả</h4>
                <hr />
                <p>
                  <span>
                    Khám phá các dòng điện thoại hiện đại – Công nghệ đỉnh cao trong tầm tay! Điện thoại ngày nay không chỉ là công cụ liên lạc, mà còn là trợ thủ đắc lực trong cuộc sống. Với thiết kế tinh tế, hiệu năng mạnh mẽ, và camera sắc nét, các dòng sản phẩm mới mang đến trải nghiệm mượt mà và phong cách thời thượng. Dù bạn yêu thích chụp ảnh, cần thiết bị cho công việc hay muốn khẳng định phong cách cá nhân – chúng tôi đều có chiếc điện thoại dành cho bạn!
                  </span>
                </p>
              </div>
            </div>
          `;
        }
      }

      // hàm thay đổi nguồn ảnh
      function displayMainImage(src) {
        const mainImg = document.getElementById("displayMainImg");

        if (mainImg.src.endsWith(src)) {
          return; // Nếu giống nhau, không làm gì cả
        }

        // Thêm lớp fade-out để trượt và biến mất
        mainImg.classList.add("fade-out");

        // Đợi một thời gian để hiệu ứng trượt biến mất hoàn tất trước khi thay đổi hình ảnh
        setTimeout(() => {
          mainImg.src = src; // Thay đổi src của hình ảnh lớn
          mainImg.classList.remove("fade-out"); // Gỡ bỏ lớp fade-out
        }, 500); // Thời gian này phải khớp với thời gian trong transition CSS
      }

      showProductDetails();

      function searchProduct(event) {
        event.preventDefault(); // Ngăn form reload trang
        const searchBox = document.getElementById("search-box");
        const query = searchBox.value.trim(); // Lấy giá trị từ ô tìm kiếm
        if (query) {
          // Điều hướng sang trang SanPham.html với từ khóa tìm kiếm
          window.location.href = `SanPham.html?search=${encodeURIComponent(
            query
          )}`;
        }
      }
    </script>
  </body>
</html>
